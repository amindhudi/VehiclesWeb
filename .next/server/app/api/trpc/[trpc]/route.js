(()=>{var e={};e.id=649,e.ids=[649],e.modules={5582:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=5582,e.exports=t},66860:e=>{"use strict";e.exports=require("express")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57441:e=>{"use strict";e.exports=require("sharp")},27790:e=>{"use strict";e.exports=require("assert")},61212:e=>{"use strict";e.exports=require("async_hooks")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},85807:e=>{"use strict";e.exports=require("module")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},6162:e=>{"use strict";e.exports=require("worker_threads")},71568:e=>{"use strict";e.exports=require("zlib")},60054:(e,t,r)=>{"use strict";let s;r.r(t),r.d(t,{originalPathname:()=>nM,patchFetch:()=>nL,requestAsyncStorage:()=>nq,routeModule:()=>nj,serverHooks:()=>nU,staticGenerationAsyncStorage:()=>nZ});var a,i,n,o,l={};r.r(l),r.d(l,{StripeAPIError:()=>rh,StripeAuthenticationError:()=>rp,StripeCardError:()=>rd,StripeConnectionError:()=>rv,StripeError:()=>ru,StripeIdempotencyError:()=>ry,StripeInvalidGrantError:()=>rg,StripeInvalidRequestError:()=>rc,StripePermissionError:()=>rm,StripeRateLimitError:()=>rf,StripeSignatureVerificationError:()=>r_,StripeUnknownError:()=>rT,generate:()=>rl});var u={};r.r(u),r.d(u,{Account:()=>aw,AccountLinks:()=>aS,AccountSessions:()=>ak,Accounts:()=>aw,ApplePayDomains:()=>aC,ApplicationFees:()=>aN,Apps:()=>i3,Balance:()=>aG,BalanceTransactions:()=>aj,BillingPortal:()=>i6,Charges:()=>aZ,Checkout:()=>i7,Climate:()=>ne,CountrySpecs:()=>aM,Coupons:()=>aF,CreditNotes:()=>aH,CustomerSessions:()=>aV,Customers:()=>aK,Disputes:()=>aJ,EphemeralKeys:()=>aQ,Events:()=>a1,ExchangeRates:()=>a2,FileLinks:()=>a9,Files:()=>a3,FinancialConnections:()=>nt,Identity:()=>nr,InvoiceItems:()=>a7,Invoices:()=>it,Issuing:()=>ns,Mandates:()=>is,OAuth:()=>io,PaymentIntents:()=>iu,PaymentLinks:()=>ic,PaymentMethodConfigurations:()=>ip,PaymentMethodDomains:()=>iv,PaymentMethods:()=>iy,Payouts:()=>iT,Plans:()=>iE,Prices:()=>iw,Products:()=>iS,PromotionCodes:()=>ik,Quotes:()=>iC,Radar:()=>na,Refunds:()=>iN,Reporting:()=>ni,Reviews:()=>iG,SetupAttempts:()=>ij,SetupIntents:()=>iZ,ShippingRates:()=>iM,Sigma:()=>nn,Sources:()=>iF,SubscriptionItems:()=>iH,SubscriptionSchedules:()=>iV,Subscriptions:()=>iK,Tax:()=>no,TaxCodes:()=>iJ,TaxRates:()=>iQ,Terminal:()=>nl,TestHelpers:()=>nu,Tokens:()=>i1,Topups:()=>i2,Transfers:()=>i9,Treasury:()=>nd,WebhookEndpoints:()=>i8});var d={};r.r(d),r.d(d,{GET:()=>nD,POST:()=>nD});var c=r(73278),h=r(45002),p=r(54877),m=r(55249);(function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),s={};for(let e of r)s[e]=t[e];return e.objectValues(s)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t})(a||(a={})),(i||(i={})).mergeShapes=(e,t)=>({...e,...t});let f=a.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),v=e=>{switch(typeof e){case"undefined":return f.undefined;case"string":return f.string;case"number":return isNaN(e)?f.nan:f.number;case"boolean":return f.boolean;case"function":return f.function;case"bigint":return f.bigint;case"symbol":return f.symbol;case"object":if(Array.isArray(e))return f.array;if(null===e)return f.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return f.promise;if("undefined"!=typeof Map&&e instanceof Map)return f.map;if("undefined"!=typeof Set&&e instanceof Set)return f.set;if("undefined"!=typeof Date&&e instanceof Date)return f.date;return f.object;default:return f.unknown}},_=a.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class y extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},r={_errors:[]},s=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(s);else if("invalid_return_type"===a.code)s(a.returnTypeError);else if("invalid_arguments"===a.code)s(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,s=0;for(;s<a.path.length;){let r=a.path[s];s===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],s++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,a.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}y.create=e=>new y(e);let g=(e,t)=>{let r;switch(e.code){case _.invalid_type:r=e.received===f.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case _.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,a.jsonStringifyReplacer)}`;break;case _.unrecognized_keys:r=`Unrecognized key(s) in object: ${a.joinValues(e.keys,", ")}`;break;case _.invalid_union:r="Invalid input";break;case _.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${a.joinValues(e.options)}`;break;case _.invalid_enum_value:r=`Invalid enum value. Expected ${a.joinValues(e.options)}, received '${e.received}'`;break;case _.invalid_arguments:r="Invalid function arguments";break;case _.invalid_return_type:r="Invalid function return type";break;case _.invalid_date:r="Invalid date";break;case _.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:a.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case _.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case _.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case _.custom:r="Invalid input";break;case _.invalid_intersection_types:r="Intersection results could not be merged";break;case _.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case _.not_finite:r="Number must be finite";break;default:r=t.defaultError,a.assertNever(e)}return{message:r}},T=g;function P(){return T}let E=e=>{let{data:t,path:r,errorMaps:s,issueData:a}=e,i=[...r,...a.path||[]],n={...a,path:i},o="";for(let e of s.filter(e=>!!e).slice().reverse())o=e(n,{data:t,defaultError:o}).message;return{...a,path:i,message:a.message||o}};function b(e,t){let r=E({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,P(),g].filter(e=>!!e)});e.common.issues.push(r)}class w{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let s of t){if("aborted"===s.status)return x;"dirty"===s.status&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t)r.push({key:await e.key,value:await e.value});return w.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let s of t){let{key:t,value:a}=s;if("aborted"===t.status||"aborted"===a.status)return x;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==a.value||s.alwaysSet)&&(r[t.value]=a.value)}return{status:e.value,value:r}}}let x=Object.freeze({status:"aborted"}),S=e=>({status:"dirty",value:e}),O=e=>({status:"valid",value:e}),k=e=>"aborted"===e.status,R=e=>"dirty"===e.status,C=e=>"valid"===e.status,A=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(n||(n={}));class N{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let I=(e,t)=>{if(C(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new y(e.common.issues);return this._error=t,this._error}}};function G(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:s,description:a}=e;if(t&&(r||s))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=s?s:t.defaultError}:{message:null!=r?r:t.defaultError},description:a}}class D{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return v(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:v(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new w,ctx:{common:e.parent.common,data:e.data,parsedType:v(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(A(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let s={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:v(e)},a=this._parseSync({data:e,path:s.path,parent:s});return I(s,a)}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:v(e)},s=this._parse({data:e,path:r.path,parent:r});return I(r,await (A(s)?s:Promise.resolve(s)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,s)=>{let a=e(t),i=()=>s.addIssue({code:_.custom,...r(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(i(),!1)):!!a||(i(),!1)})}refinement(e,t){return this._refinement((r,s)=>!!e(r)||(s.addIssue("function"==typeof t?t(r,s):t),!1))}_refinement(e){return new eg({schema:this,typeName:o.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return eT.create(this,this._def)}nullable(){return eP.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return er.create(this,this._def)}promise(){return ey.create(this,this._def)}or(e){return ea.create([this,e],this._def)}and(e){return eo.create(this,e,this._def)}transform(e){return new eg({...G(this._def),schema:this,typeName:o.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eE({...G(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:o.ZodDefault})}brand(){return new eS({typeName:o.ZodBranded,type:this,...G(this._def)})}catch(e){return new eb({...G(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:o.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eO.create(this,e)}readonly(){return ek.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let j=/^c[^\s-]{8,}$/i,q=/^[a-z][a-z0-9]*$/,Z=/^[0-9A-HJKMNP-TV-Z]{26}$/,U=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,M=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,L=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,F=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,$=e=>e.precision?e.offset?RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):0===e.precision?e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");class H extends D{_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==f.string){let t=this._getOrReturnCtx(e);return b(t,{code:_.invalid_type,expected:f.string,received:t.parsedType}),x}let r=new w;for(let o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(b(t=this._getOrReturnCtx(e,t),{code:_.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if("max"===o.kind)e.data.length>o.value&&(b(t=this._getOrReturnCtx(e,t),{code:_.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if("length"===o.kind){let s=e.data.length>o.value,a=e.data.length<o.value;(s||a)&&(t=this._getOrReturnCtx(e,t),s?b(t,{code:_.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&b(t,{code:_.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if("email"===o.kind)M.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"email",code:_.invalid_string,message:o.message}),r.dirty());else if("emoji"===o.kind)s||(s=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),s.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"emoji",code:_.invalid_string,message:o.message}),r.dirty());else if("uuid"===o.kind)U.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"uuid",code:_.invalid_string,message:o.message}),r.dirty());else if("cuid"===o.kind)j.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"cuid",code:_.invalid_string,message:o.message}),r.dirty());else if("cuid2"===o.kind)q.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"cuid2",code:_.invalid_string,message:o.message}),r.dirty());else if("ulid"===o.kind)Z.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"ulid",code:_.invalid_string,message:o.message}),r.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(s){b(t=this._getOrReturnCtx(e,t),{validation:"url",code:_.invalid_string,message:o.message}),r.dirty()}else if("regex"===o.kind)o.regex.lastIndex=0,o.regex.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"regex",code:_.invalid_string,message:o.message}),r.dirty());else if("trim"===o.kind)e.data=e.data.trim();else if("includes"===o.kind)e.data.includes(o.value,o.position)||(b(t=this._getOrReturnCtx(e,t),{code:_.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty());else if("toLowerCase"===o.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===o.kind)e.data=e.data.toUpperCase();else if("startsWith"===o.kind)e.data.startsWith(o.value)||(b(t=this._getOrReturnCtx(e,t),{code:_.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty());else if("endsWith"===o.kind)e.data.endsWith(o.value)||(b(t=this._getOrReturnCtx(e,t),{code:_.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty());else if("datetime"===o.kind)$(o).test(e.data)||(b(t=this._getOrReturnCtx(e,t),{code:_.invalid_string,validation:"datetime",message:o.message}),r.dirty());else if("ip"===o.kind){var i,n;i=e.data,("v4"===(n=o.version)||!n)&&L.test(i)||("v6"===n||!n)&&F.test(i)||(b(t=this._getOrReturnCtx(e,t),{validation:"ip",code:_.invalid_string,message:o.message}),r.dirty())}else a.assertNever(o);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:_.invalid_string,...n.errToObj(r)})}_addCheck(e){return new H({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...n.errToObj(e)})}url(e){return this._addCheck({kind:"url",...n.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...n.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...n.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...n.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...n.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...n.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...n.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...n.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...n.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...n.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...n.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...n.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...n.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...n.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...n.errToObj(t)})}nonempty(e){return this.min(1,n.errToObj(e))}trim(){return new H({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new H({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new H({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}H.create=e=>{var t;return new H({checks:[],typeName:o.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...G(e)})};class z extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==f.number){let t=this._getOrReturnCtx(e);return b(t,{code:_.invalid_type,expected:f.number,received:t.parsedType}),x}let r=new w;for(let s of this._def.checks)"int"===s.kind?a.isInteger(e.data)||(b(t=this._getOrReturnCtx(e,t),{code:_.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):"min"===s.kind?(s.inclusive?e.data<s.value:e.data<=s.value)&&(b(t=this._getOrReturnCtx(e,t),{code:_.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):"max"===s.kind?(s.inclusive?e.data>s.value:e.data>=s.value)&&(b(t=this._getOrReturnCtx(e,t),{code:_.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):"multipleOf"===s.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,a=r>s?r:s;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}(e.data,s.value)&&(b(t=this._getOrReturnCtx(e,t),{code:_.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(b(t=this._getOrReturnCtx(e,t),{code:_.not_finite,message:s.message}),r.dirty()):a.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,n.toString(t))}gt(e,t){return this.setLimit("min",e,!1,n.toString(t))}lte(e,t){return this.setLimit("max",e,!0,n.toString(t))}lt(e,t){return this.setLimit("max",e,!1,n.toString(t))}setLimit(e,t,r,s){return new z({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:n.toString(s)}]})}_addCheck(e){return new z({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:n.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:n.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:n.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:n.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:n.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:n.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:n.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:n.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:n.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&a.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}z.create=e=>new z({checks:[],typeName:o.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...G(e)});class V extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==f.bigint){let t=this._getOrReturnCtx(e);return b(t,{code:_.invalid_type,expected:f.bigint,received:t.parsedType}),x}let r=new w;for(let s of this._def.checks)"min"===s.kind?(s.inclusive?e.data<s.value:e.data<=s.value)&&(b(t=this._getOrReturnCtx(e,t),{code:_.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):"max"===s.kind?(s.inclusive?e.data>s.value:e.data>=s.value)&&(b(t=this._getOrReturnCtx(e,t),{code:_.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(b(t=this._getOrReturnCtx(e,t),{code:_.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):a.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,n.toString(t))}gt(e,t){return this.setLimit("min",e,!1,n.toString(t))}lte(e,t){return this.setLimit("max",e,!0,n.toString(t))}lt(e,t){return this.setLimit("max",e,!1,n.toString(t))}setLimit(e,t,r,s){return new V({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:n.toString(s)}]})}_addCheck(e){return new V({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:n.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:n.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:n.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:n.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:n.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}V.create=e=>{var t;return new V({checks:[],typeName:o.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...G(e)})};class B extends D{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==f.boolean){let t=this._getOrReturnCtx(e);return b(t,{code:_.invalid_type,expected:f.boolean,received:t.parsedType}),x}return O(e.data)}}B.create=e=>new B({typeName:o.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...G(e)});class K extends D{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==f.date){let t=this._getOrReturnCtx(e);return b(t,{code:_.invalid_type,expected:f.date,received:t.parsedType}),x}if(isNaN(e.data.getTime()))return b(this._getOrReturnCtx(e),{code:_.invalid_date}),x;let r=new w;for(let s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(b(t=this._getOrReturnCtx(e,t),{code:_.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(b(t=this._getOrReturnCtx(e,t),{code:_.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):a.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new K({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:n.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:n.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}K.create=e=>new K({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:o.ZodDate,...G(e)});class W extends D{_parse(e){if(this._getType(e)!==f.symbol){let t=this._getOrReturnCtx(e);return b(t,{code:_.invalid_type,expected:f.symbol,received:t.parsedType}),x}return O(e.data)}}W.create=e=>new W({typeName:o.ZodSymbol,...G(e)});class J extends D{_parse(e){if(this._getType(e)!==f.undefined){let t=this._getOrReturnCtx(e);return b(t,{code:_.invalid_type,expected:f.undefined,received:t.parsedType}),x}return O(e.data)}}J.create=e=>new J({typeName:o.ZodUndefined,...G(e)});class Y extends D{_parse(e){if(this._getType(e)!==f.null){let t=this._getOrReturnCtx(e);return b(t,{code:_.invalid_type,expected:f.null,received:t.parsedType}),x}return O(e.data)}}Y.create=e=>new Y({typeName:o.ZodNull,...G(e)});class Q extends D{constructor(){super(...arguments),this._any=!0}_parse(e){return O(e.data)}}Q.create=e=>new Q({typeName:o.ZodAny,...G(e)});class X extends D{constructor(){super(...arguments),this._unknown=!0}_parse(e){return O(e.data)}}X.create=e=>new X({typeName:o.ZodUnknown,...G(e)});class ee extends D{_parse(e){let t=this._getOrReturnCtx(e);return b(t,{code:_.invalid_type,expected:f.never,received:t.parsedType}),x}}ee.create=e=>new ee({typeName:o.ZodNever,...G(e)});class et extends D{_parse(e){if(this._getType(e)!==f.undefined){let t=this._getOrReturnCtx(e);return b(t,{code:_.invalid_type,expected:f.void,received:t.parsedType}),x}return O(e.data)}}et.create=e=>new et({typeName:o.ZodVoid,...G(e)});class er extends D{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==f.array)return b(t,{code:_.invalid_type,expected:f.array,received:t.parsedType}),x;if(null!==s.exactLength){let e=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(e||a)&&(b(t,{code:e?_.too_big:_.too_small,minimum:a?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&(b(t,{code:_.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&(b(t,{code:_.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>s.type._parseAsync(new N(t,e,t.path,r)))).then(e=>w.mergeArray(r,e));let a=[...t.data].map((e,r)=>s.type._parseSync(new N(t,e,t.path,r)));return w.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new er({...this._def,minLength:{value:e,message:n.toString(t)}})}max(e,t){return new er({...this._def,maxLength:{value:e,message:n.toString(t)}})}length(e,t){return new er({...this._def,exactLength:{value:e,message:n.toString(t)}})}nonempty(e){return this.min(1,e)}}er.create=(e,t)=>new er({type:e,minLength:null,maxLength:null,exactLength:null,typeName:o.ZodArray,...G(t)});class es extends D{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=a.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==f.object){let t=this._getOrReturnCtx(e);return b(t,{code:_.invalid_type,expected:f.object,received:t.parsedType}),x}let{status:t,ctx:r}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof ee&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||i.push(e);let n=[];for(let e of a){let t=s[e],a=r.data[e];n.push({key:{status:"valid",value:e},value:t._parse(new N(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof ee){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of i)n.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)i.length>0&&(b(r,{code:_.unrecognized_keys,keys:i}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of i){let s=r.data[t];n.push({key:{status:"valid",value:t},value:e._parse(new N(r,s,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of n){let r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e}).then(e=>w.mergeObjectSync(t,e)):w.mergeObjectSync(t,n)}get shape(){return this._def.shape()}strict(e){return n.errToObj,new es({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var s,a,i,o;let l=null!==(i=null===(a=(s=this._def).errorMap)||void 0===a?void 0:a.call(s,t,r).message)&&void 0!==i?i:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=n.errToObj(e).message)&&void 0!==o?o:l}:{message:l}}}:{}})}strip(){return new es({...this._def,unknownKeys:"strip"})}passthrough(){return new es({...this._def,unknownKeys:"passthrough"})}extend(e){return new es({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new es({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:o.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new es({...this._def,catchall:e})}pick(e){let t={};return a.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new es({...this._def,shape:()=>t})}omit(e){let t={};return a.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new es({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof es){let r={};for(let s in t.shape){let a=t.shape[s];r[s]=eT.create(e(a))}return new es({...t._def,shape:()=>r})}return t instanceof er?new er({...t._def,type:e(t.element)}):t instanceof eT?eT.create(e(t.unwrap())):t instanceof eP?eP.create(e(t.unwrap())):t instanceof el?el.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};return a.objectKeys(this.shape).forEach(r=>{let s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}),new es({...this._def,shape:()=>t})}required(e){let t={};return a.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof eT;)e=e._def.innerType;t[r]=e}}),new es({...this._def,shape:()=>t})}keyof(){return ef(a.objectKeys(this.shape))}}es.create=(e,t)=>new es({shape:()=>e,unknownKeys:"strip",catchall:ee.create(),typeName:o.ZodObject,...G(t)}),es.strictCreate=(e,t)=>new es({shape:()=>e,unknownKeys:"strict",catchall:ee.create(),typeName:o.ZodObject,...G(t)}),es.lazycreate=(e,t)=>new es({shape:e,unknownKeys:"strip",catchall:ee.create(),typeName:o.ZodObject,...G(t)});class ea extends D{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new y(e.ctx.common.issues));return b(t,{code:_.invalid_union,unionErrors:r}),x});{let e;let s=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},i=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&s.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=s.map(e=>new y(e));return b(t,{code:_.invalid_union,unionErrors:a}),x}}get options(){return this._def.options}}ea.create=(e,t)=>new ea({options:e,typeName:o.ZodUnion,...G(t)});let ei=e=>{if(e instanceof ep)return ei(e.schema);if(e instanceof eg)return ei(e.innerType());if(e instanceof em)return[e.value];if(e instanceof ev)return e.options;if(e instanceof e_)return Object.keys(e.enum);if(e instanceof eE)return ei(e._def.innerType);if(e instanceof J)return[void 0];else if(e instanceof Y)return[null];else return null};class en extends D{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.object)return b(t,{code:_.invalid_type,expected:f.object,received:t.parsedType}),x;let r=this.discriminator,s=t.data[r],a=this.optionsMap.get(s);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(b(t,{code:_.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),x)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let s=new Map;for(let r of t){let t=ei(r.shape[e]);if(!t)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of t){if(s.has(a))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,r)}}return new en({typeName:o.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...G(r)})}}class eo extends D{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),s=(e,s)=>{if(k(e)||k(s))return x;let i=function e(t,r){let s=v(t),i=v(r);if(t===r)return{valid:!0,data:t};if(s===f.object&&i===f.object){let s=a.objectKeys(r),i=a.objectKeys(t).filter(e=>-1!==s.indexOf(e)),n={...t,...r};for(let s of i){let a=e(t[s],r[s]);if(!a.valid)return{valid:!1};n[s]=a.data}return{valid:!0,data:n}}if(s===f.array&&i===f.array){if(t.length!==r.length)return{valid:!1};let s=[];for(let a=0;a<t.length;a++){let i=e(t[a],r[a]);if(!i.valid)return{valid:!1};s.push(i.data)}return{valid:!0,data:s}}return s===f.date&&i===f.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}(e.value,s.value);return i.valid?((R(e)||R(s))&&t.dirty(),{status:t.value,value:i.data}):(b(r,{code:_.invalid_intersection_types}),x)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>s(e,t)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}eo.create=(e,t,r)=>new eo({left:e,right:t,typeName:o.ZodIntersection,...G(r)});class el extends D{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.array)return b(r,{code:_.invalid_type,expected:f.array,received:r.parsedType}),x;if(r.data.length<this._def.items.length)return b(r,{code:_.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),x;!this._def.rest&&r.data.length>this._def.items.length&&(b(r,{code:_.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let s=[...r.data].map((e,t)=>{let s=this._def.items[t]||this._def.rest;return s?s._parse(new N(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(s).then(e=>w.mergeArray(t,e)):w.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new el({...this._def,rest:e})}}el.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new el({items:e,typeName:o.ZodTuple,rest:null,...G(t)})};class eu extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.object)return b(r,{code:_.invalid_type,expected:f.object,received:r.parsedType}),x;let s=[],a=this._def.keyType,i=this._def.valueType;for(let e in r.data)s.push({key:a._parse(new N(r,e,r.path,e)),value:i._parse(new N(r,r.data[e],r.path,e))});return r.common.async?w.mergeObjectAsync(t,s):w.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return new eu(t instanceof D?{keyType:e,valueType:t,typeName:o.ZodRecord,...G(r)}:{keyType:H.create(),valueType:e,typeName:o.ZodRecord,...G(t)})}}class ed extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.map)return b(r,{code:_.invalid_type,expected:f.map,received:r.parsedType}),x;let s=this._def.keyType,a=this._def.valueType,i=[...r.data.entries()].map(([e,t],i)=>({key:s._parse(new N(r,e,r.path,[i,"key"])),value:a._parse(new N(r,t,r.path,[i,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of i){let s=await r.key,a=await r.value;if("aborted"===s.status||"aborted"===a.status)return x;("dirty"===s.status||"dirty"===a.status)&&t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of i){let s=r.key,a=r.value;if("aborted"===s.status||"aborted"===a.status)return x;("dirty"===s.status||"dirty"===a.status)&&t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}}}}ed.create=(e,t,r)=>new ed({valueType:t,keyType:e,typeName:o.ZodMap,...G(r)});class ec extends D{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.set)return b(r,{code:_.invalid_type,expected:f.set,received:r.parsedType}),x;let s=this._def;null!==s.minSize&&r.data.size<s.minSize.value&&(b(r,{code:_.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&r.data.size>s.maxSize.value&&(b(r,{code:_.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());let a=this._def.valueType;function i(e){let r=new Set;for(let s of e){if("aborted"===s.status)return x;"dirty"===s.status&&t.dirty(),r.add(s.value)}return{status:t.value,value:r}}let n=[...r.data.values()].map((e,t)=>a._parse(new N(r,e,r.path,t)));return r.common.async?Promise.all(n).then(e=>i(e)):i(n)}min(e,t){return new ec({...this._def,minSize:{value:e,message:n.toString(t)}})}max(e,t){return new ec({...this._def,maxSize:{value:e,message:n.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ec.create=(e,t)=>new ec({valueType:e,minSize:null,maxSize:null,typeName:o.ZodSet,...G(t)});class eh extends D{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.function)return b(t,{code:_.invalid_type,expected:f.function,received:t.parsedType}),x;function r(e,r){return E({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,P(),g].filter(e=>!!e),issueData:{code:_.invalid_arguments,argumentsError:r}})}function s(e,r){return E({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,P(),g].filter(e=>!!e),issueData:{code:_.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof ey){let e=this;return O(async function(...t){let n=new y([]),o=await e._def.args.parseAsync(t,a).catch(e=>{throw n.addIssue(r(t,e)),n}),l=await Reflect.apply(i,this,o);return await e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw n.addIssue(s(l,e)),n})})}{let e=this;return O(function(...t){let n=e._def.args.safeParse(t,a);if(!n.success)throw new y([r(t,n.error)]);let o=Reflect.apply(i,this,n.data),l=e._def.returns.safeParse(o,a);if(!l.success)throw new y([s(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eh({...this._def,args:el.create(e).rest(X.create())})}returns(e){return new eh({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eh({args:e||el.create([]).rest(X.create()),returns:t||X.create(),typeName:o.ZodFunction,...G(r)})}}class ep extends D{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ep.create=(e,t)=>new ep({getter:e,typeName:o.ZodLazy,...G(t)});class em extends D{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return b(t,{received:t.data,code:_.invalid_literal,expected:this._def.value}),x}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ef(e,t){return new ev({values:e,typeName:o.ZodEnum,...G(t)})}em.create=(e,t)=>new em({value:e,typeName:o.ZodLiteral,...G(t)});class ev extends D{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return b(t,{expected:a.joinValues(r),received:t.parsedType,code:_.invalid_type}),x}if(-1===this._def.values.indexOf(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return b(t,{received:t.data,code:_.invalid_enum_value,options:r}),x}return O(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return ev.create(e)}exclude(e){return ev.create(this.options.filter(t=>!e.includes(t)))}}ev.create=ef;class e_ extends D{_parse(e){let t=a.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==f.string&&r.parsedType!==f.number){let e=a.objectValues(t);return b(r,{expected:a.joinValues(e),received:r.parsedType,code:_.invalid_type}),x}if(-1===t.indexOf(e.data)){let e=a.objectValues(t);return b(r,{received:r.data,code:_.invalid_enum_value,options:e}),x}return O(e.data)}get enum(){return this._def.values}}e_.create=(e,t)=>new e_({values:e,typeName:o.ZodNativeEnum,...G(t)});class ey extends D{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==f.promise&&!1===t.common.async?(b(t,{code:_.invalid_type,expected:f.promise,received:t.parsedType}),x):O((t.parsedType===f.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ey.create=(e,t)=>new ey({type:e,typeName:o.ZodPromise,...G(t)});class eg extends D{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===o.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:e=>{b(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===s.type){let e=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then(e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r})):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===s.type){let e=e=>{let t=s.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?x:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===s.status?x:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}}if("transform"===s.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>C(e)?Promise.resolve(s.transform(e.value,i)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!C(e))return e;let a=s.transform(e.value,i);if(a instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}}a.assertNever(s)}}eg.create=(e,t,r)=>new eg({schema:e,typeName:o.ZodEffects,effect:t,...G(r)}),eg.createWithPreprocess=(e,t,r)=>new eg({schema:t,effect:{type:"preprocess",transform:e},typeName:o.ZodEffects,...G(r)});class eT extends D{_parse(e){return this._getType(e)===f.undefined?O(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eT.create=(e,t)=>new eT({innerType:e,typeName:o.ZodOptional,...G(t)});class eP extends D{_parse(e){return this._getType(e)===f.null?O(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eP.create=(e,t)=>new eP({innerType:e,typeName:o.ZodNullable,...G(t)});class eE extends D{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===f.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eE.create=(e,t)=>new eE({innerType:e,typeName:o.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...G(t)});class eb extends D{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return A(s)?s.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new y(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new y(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eb.create=(e,t)=>new eb({innerType:e,typeName:o.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...G(t)});class ew extends D{_parse(e){if(this._getType(e)!==f.nan){let t=this._getOrReturnCtx(e);return b(t,{code:_.invalid_type,expected:f.nan,received:t.parsedType}),x}return{status:"valid",value:e.data}}}ew.create=e=>new ew({typeName:o.ZodNaN,...G(e)});let ex=Symbol("zod_brand");class eS extends D{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eO extends D{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?x:"dirty"===e.status?(t.dirty(),S(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?x:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eO({in:e,out:t,typeName:o.ZodPipeline})}}class ek extends D{_parse(e){let t=this._def.innerType._parse(e);return C(t)&&(t.value=Object.freeze(t.value)),t}}ek.create=(e,t)=>new ek({innerType:e,typeName:o.ZodReadonly,...G(t)});let eR=(e,t={},r)=>e?Q.create().superRefine((s,a)=>{var i,n;if(!e(s)){let e="function"==typeof t?t(s):"string"==typeof t?{message:t}:t,o=null===(n=null!==(i=e.fatal)&&void 0!==i?i:r)||void 0===n||n;a.addIssue({code:"custom",..."string"==typeof e?{message:e}:e,fatal:o})}}):Q.create(),eC={object:es.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(o||(o={}));let eA=H.create,eN=z.create,eI=ew.create,eG=V.create,eD=B.create,ej=K.create,eq=W.create,eZ=J.create,eU=Y.create,eM=Q.create,eL=X.create,eF=ee.create,e$=et.create,eH=er.create,ez=es.create,eV=es.strictCreate,eB=ea.create,eK=en.create,eW=eo.create,eJ=el.create,eY=eu.create,eQ=ed.create,eX=ec.create,e1=eh.create,e0=ep.create,e2=em.create,e4=ev.create,e9=e_.create,e5=ey.create,e8=eg.create,e3=eT.create,e6=eP.create,e7=eg.createWithPreprocess,te=eO.create;var tt=Object.freeze({__proto__:null,defaultErrorMap:g,setErrorMap:function(e){T=e},getErrorMap:P,makeIssue:E,EMPTY_PATH:[],addIssueToContext:b,ParseStatus:w,INVALID:x,DIRTY:S,OK:O,isAborted:k,isDirty:R,isValid:C,isAsync:A,get util(){return a},get objectUtil(){return i},ZodParsedType:f,getParsedType:v,ZodType:D,ZodString:H,ZodNumber:z,ZodBigInt:V,ZodBoolean:B,ZodDate:K,ZodSymbol:W,ZodUndefined:J,ZodNull:Y,ZodAny:Q,ZodUnknown:X,ZodNever:ee,ZodVoid:et,ZodArray:er,ZodObject:es,ZodUnion:ea,ZodDiscriminatedUnion:en,ZodIntersection:eo,ZodTuple:el,ZodRecord:eu,ZodMap:ed,ZodSet:ec,ZodFunction:eh,ZodLazy:ep,ZodLiteral:em,ZodEnum:ev,ZodNativeEnum:e_,ZodPromise:ey,ZodEffects:eg,ZodTransformer:eg,ZodOptional:eT,ZodNullable:eP,ZodDefault:eE,ZodCatch:eb,ZodNaN:ew,BRAND:ex,ZodBranded:eS,ZodPipeline:eO,ZodReadonly:ek,custom:eR,Schema:D,ZodSchema:D,late:eC,get ZodFirstPartyTypeKind(){return o},coerce:{string:e=>H.create({...e,coerce:!0}),number:e=>z.create({...e,coerce:!0}),boolean:e=>B.create({...e,coerce:!0}),bigint:e=>V.create({...e,coerce:!0}),date:e=>K.create({...e,coerce:!0})},any:eM,array:eH,bigint:eG,boolean:eD,date:ej,discriminatedUnion:eK,effect:e8,enum:e4,function:e1,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>eR(t=>t instanceof e,t),intersection:eW,lazy:e0,literal:e2,map:eQ,nan:eI,nativeEnum:e9,never:eF,null:eU,nullable:e6,number:eN,object:ez,oboolean:()=>eD().optional(),onumber:()=>eN().optional(),optional:e3,ostring:()=>eA().optional(),pipeline:te,preprocess:e7,promise:e5,record:eY,set:eX,strictObject:eV,string:eA,symbol:eq,transformer:e8,tuple:eJ,undefined:eZ,union:eB,unknown:eL,void:e$,NEVER:x,ZodIssueCode:_,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:y});let tr=tt.object({category:tt.string().optional(),company:tt.string().optional(),vehicle:tt.string().optional(),search:tt.string().optional(),sort:tt.enum(["asc","desc"]),limit:tt.number().optional()}),ts=tt.object({email:tt.string().email(),password:tt.string().min(8,{message:"Password must be at least 8 characters long."})});class ta extends Error{}function ti(e){if(e instanceof tn||e instanceof Error&&"TRPCError"===e.name)return e;let t=new tn({code:"INTERNAL_SERVER_ERROR",cause:e});return e instanceof Error&&e.stack&&(t.stack=e.stack),t}class tn extends Error{constructor(e){let t=function(e){if(e instanceof Error)return e;let t=typeof e;if("undefined"!==t&&"function"!==t&&null!==e){if("object"!==t)return Error(String(e));if(e&&!Array.isArray(e)&&"object"==typeof e){let t=new ta;for(let r in e)t[r]=e[r];return t}}}(e.cause);super(e.message??t?.message??e.code,{cause:t}),this.code=e.code,this.name="TRPCError",this.cause||(this.cause=t)}}function to(e){let t=Object.create(null);for(let r in e)t[e[r]]=r;return t}let tl={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};to(tl);let tu=to(tl),td={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,FORBIDDEN:403,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501};function tc(e){return td[e.code]??500}let th=()=>{},tp=e=>(function e(t,r){return new Proxy(th,{get(s,a){if("string"==typeof a&&"then"!==a)return e(t,[...r,a])},apply(e,s,a){let i="apply"===r[r.length-1];return t({args:i?a.length>=2?a[1]:[]:a,path:i?r.slice(0,-1):r})}})})(e,[]),tm=e=>new Proxy(th,{get(t,r){if("string"==typeof r&&"then"!==r)return e(r)}}),tf={_default:!0,input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}},tv=({shape:e})=>e,t_=["query","mutation","subscription"],ty={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:tv,transformer:tf},tg=["then"];function tT(e){return function(t){var r;let s=new Set(Object.keys(t).filter(e=>tg.includes(e)));if(s.size>0)throw Error("Reserved words used in `router({})` call: "+Array.from(s).join(", "));let a=(r={},Object.assign(Object.create(null),r));!function e(t,r=""){for(let[s,i]of Object.entries(t??{})){let t=`${r}${s}`;if("router"in i._def){e(i._def.procedures,`${t}.`);continue}if(a[t])throw Error(`Duplicate key: ${t}`);a[t]=i}}(t);let i={_config:e,router:!0,procedures:a,...ty,record:t,queries:Object.entries(a).filter(e=>e[1]._def.query).reduce((e,[t,r])=>({...e,[t]:r}),{}),mutations:Object.entries(a).filter(e=>e[1]._def.mutation).reduce((e,[t,r])=>({...e,[t]:r}),{}),subscriptions:Object.entries(a).filter(e=>e[1]._def.subscription).reduce((e,[t,r])=>({...e,[t]:r}),{})},n={...t,_def:i,createCaller:e=>tE()(n)(e),getErrorShape(t){let{path:r,error:s}=t,{code:a}=t.error,i={message:s.message,code:tl[a],data:{code:a,httpStatus:tc(s)}};return e.isDev&&"string"==typeof t.error.stack&&(i.data.stack=t.error.stack),"string"==typeof r&&(i.data.path=r),this._def._config.errorFormatter({...t,shape:i})}};return n}}function tP(e){let{type:t,path:r}=e;if(!(r in e.procedures)||!e.procedures[r]?._def[t])throw new tn({code:"NOT_FOUND",message:`No "${t}"-procedure on path "${r}"`});return(0,e.procedures[r])(e)}function tE(){return function(e){let t=e._def;return function(e){return tp(({path:r,args:s})=>{if(1===r.length&&t_.includes(r[0]))return tP({procedures:t.procedures,path:s[0],rawInput:s[1],ctx:e,type:r[0]});let a=r.join("."),i=t.procedures[a],n="query";return i._def.mutation?n="mutation":i._def.subscription&&(n="subscription"),i({path:a,rawInput:s[0],ctx:e,type:n})})}}}let tb="undefined"==typeof window||"Deno"in window||globalThis.process?.env?.NODE_ENV==="test"||!!globalThis.process?.env?.JEST_WORKER_ID||!!globalThis.process?.env?.VITEST_WORKER_ID,tw="middlewareMarker";function tx(e){if("function"==typeof e)return e;if("function"==typeof e.parseAsync)return e.parseAsync.bind(e);if("function"==typeof e.parse)return e.parse.bind(e);if("function"==typeof e.validateSync)return e.validateSync.bind(e);if("function"==typeof e.create)return e.create.bind(e);throw Error("Could not find a validator fn")}class tS{_def(){return{middlewares:this.middlewares,resolver:this.resolver,inputParser:this.inputParser,outputParser:this.outputParser,meta:this.meta}}async parseInput(e){try{return await this.parseInputFn(e)}catch(e){throw new TRPCError({code:"BAD_REQUEST",cause:e})}}async parseOutput(e){try{return await this.parseOutputFn(e)}catch(e){throw new TRPCError({code:"INTERNAL_SERVER_ERROR",cause:e,message:"Output validation failed"})}}async call(e){let t=this.middlewares.concat([async({ctx:t})=>{let r=await this.parseInput(e.rawInput),s=await this.resolver({...e,ctx:t,input:r});return{marker:tw,ok:!0,data:await this.parseOutput(s),ctx:t}}]),r=async(s={index:0,ctx:e.ctx})=>{try{return await t[s.index]({ctx:s.ctx,type:e.type,path:e.path,rawInput:e.rawInput,meta:this.meta,next:async e=>await r({index:s.index+1,ctx:e?e.ctx:s.ctx})})}catch(e){return{ctx:s.ctx,ok:!1,error:getTRPCErrorFromUnknown(e),marker:tw}}},s=await r();if(!s)throw new TRPCError({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!s.ok)throw s.error;return s.data}inheritMiddlewares(e){return new this.constructor({middlewares:[...e,...this.middlewares],resolver:this.resolver,inputParser:this.inputParser,outputParser:this.outputParser,meta:this.meta})}constructor(e){this.middlewares=e.middlewares,this.resolver=e.resolver,this.inputParser=e.inputParser,this.parseInputFn=tx(this.inputParser),this.outputParser=e.outputParser,this.parseOutputFn=tx(this.outputParser),this.meta=e.meta}}function tO(e){let t="input"in e?e.input:e=>{if(null!=e)throw new TRPCError({code:"BAD_REQUEST",message:"No input expected"})},r="output"in e&&e.output?e.output:e=>e;return new tS({inputParser:t,resolver:e.resolve,middlewares:[],outputParser:r,meta:e.meta})}function tk(e){if("function"==typeof e)return e;if("function"==typeof e.parseAsync)return e.parseAsync.bind(e);if("function"==typeof e.parse)return e.parse.bind(e);if("function"==typeof e.validateSync)return e.validateSync.bind(e);if("function"==typeof e.create)return e.create.bind(e);if("function"==typeof e.assert)return t=>(e.assert(t),t);throw Error("Could not find a validator fn")}function tR(e,...t){let r=Object.assign(Object.create(null),e);for(let e of t)for(let t in e){if(t in r&&r[t]!==e[t])throw Error(`Duplicate key ${t}`);r[t]=e[t]}return r}function tC(e){return e&&"object"==typeof e&&!Array.isArray(e)}function tA(e){let t=async({next:t,rawInput:r,input:s})=>{let a;try{a=await e(r)}catch(e){throw new tn({code:"BAD_REQUEST",cause:e})}return t({input:tC(s)&&tC(a)?{...s,...a}:a})};return t._type="input",t}function tN(e){let t=async({next:t})=>{let r=await t();if(!r.ok)return r;try{let t=await e(r.data);return{...r,data:t}}catch(e){throw new tn({message:"Output validation failed",code:"INTERNAL_SERVER_ERROR",cause:e})}};return t._type="output",t}let tI="middlewareMarker";function tG(e,t){let{middlewares:r=[],inputs:s,meta:a,...i}=t;return tD({...tR(e,i),inputs:[...e.inputs,...s??[]],middlewares:[...e.middlewares,...r],meta:e.meta&&a?{...e.meta,...a}:a??e.meta})}function tD(e={}){let t={inputs:[],middlewares:[],...e};return{_def:t,input(e){let r=tk(e);return tG(t,{inputs:[e],middlewares:[tA(r)]})},output(e){let r=tk(e);return tG(t,{output:e,middlewares:[tN(r)]})},meta:e=>tG(t,{meta:e}),unstable_concat:e=>tG(t,e._def),use:e=>tG(t,{middlewares:"_middlewares"in e?e._middlewares:[e]}),query:e=>tj({...t,query:!0},e),mutation:e=>tj({...t,mutation:!0},e),subscription:e=>tj({...t,subscription:!0},e)}}function tj(e,t){return function(e){let t=async function(t){if(!t||!("rawInput"in t))throw Error(tq);let r=async(s={index:0,ctx:t.ctx})=>{try{let a=e.middlewares[s.index];return await a({ctx:s.ctx,type:t.type,path:t.path,rawInput:s.rawInput??t.rawInput,meta:e.meta,input:s.input,next:e=>r({index:s.index+1,ctx:e&&"ctx"in e?{...s.ctx,...e.ctx}:s.ctx,input:e&&"input"in e?e.input:s.input,rawInput:e&&"rawInput"in e?e.rawInput:s.rawInput})})}catch(e){return{ok:!1,error:ti(e),marker:tI}}},s=await r();if(!s)throw new tn({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!s.ok)throw s.error;return s.data};return t._def=e,t.meta=e.meta,t}(tG(e,{resolver:t,middlewares:[async function(e){return{marker:tI,ok:!0,data:await t(e),ctx:e.ctx}}]})._def)}let tq=`
This is a client-only function.
If you want to call this function on the server, see https://trpc.io/docs/server/server-side-calls
`.trim();function tZ(e,t){var r,s;let a=e._def(),i=(r=a.inputParser)?tk(r):e=>e,n=(s=a.outputParser)?tk(s):e=>e,o=tA(i);return tD({inputs:[a.inputParser],middlewares:[...a.middlewares,o,tN(n)],meta:a.meta,output:a.outputParser,mutation:"mutation"===t,query:"query"===t,subscription:"subscription"===t})[t](e=>a.resolver(e))}let tU={query:"queries",mutation:"mutations",subscription:"subscriptions"};function tM(...e){return Object.assign(Object.create(null),...e)}class tL{static prefixProcedures(e,t){let r=tM();for(let[s,a]of Object.entries(e))r[t+s]=a;return r}query(e,t){let r=new tL({queries:tM({[e]:tO(t)})});return this.merge(r)}mutation(e,t){let r=new tL({mutations:tM({[e]:tO(t)})});return this.merge(r)}subscription(e,t){let r=new tL({subscriptions:tM({[e]:tO(t)})});return this.merge(r)}merge(e,t){let r,s="";if("string"==typeof e&&t instanceof tL)s=e,r=t;else if(e instanceof tL)r=e;else throw Error("Invalid args");let a=[...Object.keys(r._def.queries).filter(e=>!!this._def.queries[s+e]),...Object.keys(r._def.mutations).filter(e=>!!this._def.mutations[s+e]),...Object.keys(r._def.subscriptions).filter(e=>!!this._def.subscriptions[s+e])];if(a.length)throw Error(`Duplicate endpoint(s): ${a.join(", ")}`);let i=e=>{let t=tM();for(let[r,s]of Object.entries(e)){let e=s.inheritMiddlewares(this._def.middlewares);t[r]=e}return tL.prefixProcedures(t,s)};return new tL({...this._def,queries:tM(this._def.queries,i(r._def.queries)),mutations:tM(this._def.mutations,i(r._def.mutations)),subscriptions:tM(this._def.subscriptions,i(r._def.subscriptions))})}async call(e){let{type:t,path:r}=e,s=tU[t],a=this._def[s][r];if(!a)throw new TRPCError({code:"NOT_FOUND",message:`No "${t}"-procedure on path "${r}"`});return a.call(e)}createCaller(e){return{query:(t,...r)=>this.call({type:"query",ctx:e,path:t,rawInput:r[0]}),mutation:(t,...r)=>this.call({type:"mutation",ctx:e,path:t,rawInput:r[0]}),subscription:(t,...r)=>this.call({type:"subscription",ctx:e,path:t,rawInput:r[0]})}}middleware(e){return new tL({...this._def,middlewares:[...this._def.middlewares,e]})}formatError(e){if(this._def.errorFormatter!==defaultFormatter)throw Error("You seem to have double `formatError()`-calls in your router tree");return new tL({...this._def,errorFormatter:e})}getErrorShape(e){let{path:t,error:r}=e,{code:s}=e.error,a={message:r.message,code:TRPC_ERROR_CODES_BY_KEY[s],data:{code:s,httpStatus:getHTTPStatusCodeFromError(r)}};return globalThis.process?.env?.NODE_ENV!=="production"&&"string"==typeof e.error.stack&&(a.data.stack=e.error.stack),"string"==typeof t&&(a.data.path=t),this._def.errorFormatter({...e,shape:a})}transformer(e){if(this._def.transformer!==defaultTransformer)throw Error("You seem to have double `transformer()`-calls in your router tree");return new tL({...this._def,transformer:"input"in e?e:{input:e,output:e}})}flat(){return this}interop(){return function(e){let t=e._def.errorFormatter,r=e._def.transformer,s={},a={},i={};for(let[t,r]of Object.entries(e._def.queries))s[t]=tZ(r,"query");for(let[t,r]of Object.entries(e._def.mutations))a[t]=tZ(r,"mutation");for(let[t,r]of Object.entries(e._def.subscriptions))i[t]=tZ(r,"subscription");let n=tR(s,a,i);return createRouterFactory({transformer:r,errorFormatter:t,isDev:!1})(n)}(this)}constructor(e){this._def={queries:e?.queries??tM(),mutations:e?.mutations??tM(),subscriptions:e?.subscriptions??tM(),middlewares:e?.middlewares??[],errorFormatter:e?.errorFormatter??defaultFormatter,transformer:e?.transformer??defaultTransformer}}}function tF(...e){let t=tR({},...e.map(e=>e._def.record));return tT({errorFormatter:e.reduce((e,t)=>{if(t._def._config.errorFormatter&&t._def._config.errorFormatter!==tv){if(e!==tv&&e!==t._def._config.errorFormatter)throw Error("You seem to have several error formatters");return t._def._config.errorFormatter}return e},tv),transformer:e.reduce((e,t)=>{if(t._def._config.transformer&&t._def._config.transformer!==tf){if(e!==tf&&e!==t._def._config.transformer)throw Error("You seem to have several transformers");return t._def._config.transformer}return e},tf),isDev:e.some(e=>e._def._config.isDev),allowOutsideOfServer:e.some(e=>e._def._config.allowOutsideOfServer),isServer:e.some(e=>e._def._config.isServer),$types:e[0]?._def._config.$types})(t)}class t${context(){return new t$}meta(){return new t$}create(e){return function(e){var t;let r=e?.errorFormatter??tv,s={transformer:"input"in(t=e?.transformer??tf)?t:{input:t,output:t},isDev:e?.isDev??globalThis.process?.env?.NODE_ENV!=="production",allowOutsideOfServer:e?.allowOutsideOfServer??!1,errorFormatter:r,isServer:e?.isServer??tb,$types:tm(e=>{throw Error(`Tried to access "$types.${e}" which is not available at runtime`)})};if(!(e?.isServer??tb)&&e?.allowOutsideOfServer!==!0)throw Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.");return{_config:s,procedure:tD({meta:e?.defaultMeta}),middleware:function(e){return function e(t){return{_middlewares:t,unstable_pipe:r=>e([...t,..."_middlewares"in r?r._middlewares:[r]])}}([e])},router:tT(s),mergeRouters:tF,createCallerFactory:tE()}}(e)}}let tH=new t$().context().create(),tz=(0,tH.middleware)(async({ctx:e,next:t})=>{let{user:r}=e.req;if(!r||!r.id)throw new tn({code:"UNAUTHORIZED"});return t({ctx:{user:r}})}),tV=tH.router,tB=tH.procedure,tK=tH.procedure.use(tz),tW=tV({createPayloadUser:tB.input(ts).mutation(async({input:e})=>{let{email:t,password:r}=e,s=await (0,m.T)(),{docs:a}=await s.find({collection:"users",where:{email:{equals:t}}});if(0!==a.length)throw new tn({code:"CONFLICT"});return await s.create({collection:"users",data:{email:t,password:r,role:"user"}}),{success:!0,sentToEmail:t}}),verifyEmail:tB.input(tt.object({token:tt.string()})).query(async({input:e})=>{let{token:t}=e,r=await (0,m.T)();if(!await r.verifyEmail({collection:"users",token:t}))throw new tn({code:"UNAUTHORIZED"});return{success:!0}}),signIn:tB.input(ts).mutation(async({input:e,ctx:t})=>{let{email:r,password:s}=e,{res:a}=t,i=await (0,m.T)();try{return await i.login({collection:"users",data:{email:r,password:s},res:a}),{success:!0}}catch(e){throw new tn({code:"UNAUTHORIZED"})}})});var tJ=r(84770),tY=r(17702);class tQ{computeHMACSignature(e,t){throw Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,t){throw Error("computeHMACSignatureAsync not implemented.")}}class tX extends Error{}class t1 extends tQ{computeHMACSignature(e,t){return tJ.createHmac("sha256",t).update(e,"utf8").digest("hex")}async computeHMACSignatureAsync(e,t){return await this.computeHMACSignature(e,t)}}var t0=r(32615),t2=r.t(t0,2),t4=r(35240),t9=r.t(t4,2);class t5{getClientName(){throw Error("getClientName not implemented.")}makeRequest(e,t,r,s,a,i,n,o){throw Error("makeRequest not implemented.")}static makeTimeoutError(){let e=TypeError(t5.TIMEOUT_ERROR_CODE);return e.code=t5.TIMEOUT_ERROR_CODE,e}}t5.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"],t5.TIMEOUT_ERROR_CODE="ETIMEDOUT";class t8{constructor(e,t){this._statusCode=e,this._headers=t}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw Error("getRawResponse not implemented.")}toStream(e){throw Error("toStream not implemented.")}toJSON(){throw Error("toJSON not implemented.")}}let t3=t0||t2,t6=t4||t9,t7=new t3.Agent({keepAlive:!0}),re=new t6.Agent({keepAlive:!0});class rt extends t5{constructor(e){super(),this._agent=e}getClientName(){return"node"}makeRequest(e,t,r,s,a,i,n,o){let l="http"===n,u=this._agent;return u||(u=l?t7:re),new Promise((n,d)=>{let c=(l?t3:t6).request({host:e,port:t,path:r,method:s,agent:u,headers:a,ciphers:"DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5"});c.setTimeout(o,()=>{c.destroy(t5.makeTimeoutError())}),c.on("response",e=>{n(new rr(e))}),c.on("error",e=>{d(e)}),c.once("socket",e=>{e.connecting?e.once(l?"connect":"secureConnect",()=>{c.write(i),c.end()}):(c.write(i),c.end())})})}}class rr extends t8{constructor(e){super(e.statusCode,e.headers||{}),this._res=e}getRawResponse(){return this._res}toStream(e){return this._res.once("end",()=>e()),this._res}toJSON(){return new Promise((e,t)=>{let r="";this._res.setEncoding("utf8"),this._res.on("data",e=>{r+=e}),this._res.once("end",()=>{try{e(JSON.parse(r))}catch(e){t(e)}})})}}class rs extends t5{constructor(e){if(super(),!e){if(!globalThis.fetch)throw Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=rs.makeFetchWithAbortTimeout(e):this._fetchFn=rs.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(t,r,s)=>{let a;let i=new Promise((e,t)=>{a=setTimeout(()=>{a=null,t(t5.makeTimeoutError())},s)});return Promise.race([e(t,r),i]).finally(()=>{a&&clearTimeout(a)})}}static makeFetchWithAbortTimeout(e){return async(t,r,s)=>{let a=new AbortController,i=setTimeout(()=>{i=null,a.abort(t5.makeTimeoutError())},s);try{return await e(t,Object.assign(Object.assign({},r),{signal:a.signal}))}catch(e){if("AbortError"===e.name)throw t5.makeTimeoutError();throw e}finally{i&&clearTimeout(i)}}}getClientName(){return"fetch"}async makeRequest(e,t,r,s,a,i,n,o){let l=new URL(r,`${"http"===n?"http":"https"}://${e}`);l.port=t;let u="POST"==s||"PUT"==s||"PATCH"==s;return new ra(await this._fetchFn(l.toString(),{method:s,headers:a,body:i||(u?"":void 0)},o))}}class ra extends t8{constructor(e){super(e.status,ra._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){let t={};for(let r of e){if(!Array.isArray(r)||2!=r.length)throw Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");t[r[0]]=r[1]}return t}}class ri extends tQ{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,t){throw new tX("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,t){let r=new TextEncoder,s=await this.subtleCrypto.importKey("raw",r.encode(t),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),a=new Uint8Array(await this.subtleCrypto.sign("hmac",s,r.encode(e))),i=Array(a.length);for(let e=0;e<a.length;e++)i[e]=rn[a[e]];return i.join("")}}let rn=Array(256);for(let e=0;e<rn.length;e++)rn[e]=e.toString(16).padStart(2,"0");class ro{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}secureCompare(e,t){if(e.length!==t.length)return!1;let r=e.length,s=0;for(let a=0;a<r;++a)s|=e.charCodeAt(a)^t.charCodeAt(a);return 0===s}createEmitter(){throw Error("createEmitter not implemented.")}tryBufferData(e){throw Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new rs(e)}createDefaultHttpClient(){throw Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new ri(e)}createDefaultCryptoProvider(){throw Error("createDefaultCryptoProvider not implemented.")}}let rl=e=>{switch(e.type){case"card_error":return new rd(e);case"invalid_request_error":return new rc(e);case"api_error":return new rh(e);case"authentication_error":return new rp(e);case"rate_limit_error":return new rf(e);case"idempotency_error":return new ry(e);case"invalid_grant":return new rg(e);default:return new rT(e)}};class ru extends Error{constructor(e={}){super(e.message),this.type=this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=e.message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}}ru.generate=rl;class rd extends ru{}class rc extends ru{}class rh extends ru{}class rp extends ru{}class rm extends ru{}class rf extends ru{}class rv extends ru{}class r_ extends ru{constructor(e,t,r={}){super(r),this.header=e,this.payload=t}}class ry extends ru{}class rg extends ru{}class rT extends ru{}var rP=r(91241);let rE=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host"];function rb(e){return e&&"object"==typeof e&&rE.some(t=>Object.prototype.hasOwnProperty.call(e,t))}function rw(e){return rP.stringify(e,{serializeDate:e=>Math.floor(e.getTime()/1e3).toString()}).replace(/%5B/g,"[").replace(/%5D/g,"]")}let rx=(()=>{let e={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return t=>{let r=t.replace(/["\n\r\u2028\u2029]/g,t=>e[t]);return e=>r.replace(/\{([\s\S]+?)\}/g,(t,r)=>encodeURIComponent(e[r]||""))}})();function rS(e){if(!Array.isArray(e)||!e[0]||"object"!=typeof e[0])return{};if(!rb(e[0]))return e.shift();let t=Object.keys(e[0]),r=t.filter(e=>rE.includes(e));return r.length>0&&r.length!==t.length&&rR(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function rO(e){if("object"!=typeof e)throw Error("Argument must be an object");return Object.keys(e).reduce((t,r)=>(null!=e[r]&&(t[r]=e[r]),t),{})}function rk(e,t){return t?e.then(e=>{setTimeout(()=>{t(null,e)},0)},e=>{setTimeout(()=>{t(e,null)},0)}):e}function rR(e){return"function"!=typeof process.emitWarning?console.warn(`Stripe: ${e}`):process.emitWarning(e,"Stripe")}function rC(e,t,r){if(!Number.isInteger(t)){if(void 0!==r)return r;throw Error(`${e} must be an integer`)}return t}var rA=r(61282);class rN extends ru{}class rI extends ro{constructor(){super(),this._exec=rA.exec,this._UNAME_CACHE=null}uuid4(){return tJ.randomUUID?tJ.randomUUID():super.uuid4()}getUname(){return this._UNAME_CACHE||(this._UNAME_CACHE=new Promise((e,t)=>{try{this._exec("uname -a",(t,r)=>{if(t)return e(null);e(r)})}catch(t){e(null)}})),this._UNAME_CACHE}secureCompare(e,t){if(!e||!t)throw Error("secureCompare must receive two arguments");if(e.length!==t.length)return!1;if(tJ.timingSafeEqual){let r=new TextEncoder,s=r.encode(e),a=r.encode(t);return tJ.timingSafeEqual(s,a)}return super.secureCompare(e,t)}createEmitter(){return new tY.EventEmitter}tryBufferData(e){if(!(e.file.data instanceof tY.EventEmitter))return Promise.resolve(e);let t=[];return new Promise((r,s)=>{e.file.data.on("data",e=>{t.push(e)}).once("end",()=>{let s=Object.assign({},e);s.file.data=function(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{t.set(e,r),r+=e.length}),t}(t),r(s)}).on("error",e=>{s(new rN({message:"An error occurred while attempting to process the file for upload.",detail:e}))})})}createNodeHttpClient(e){return new rt(e)}createDefaultHttpClient(){return new rt}createNodeCryptoProvider(){return new t1}createDefaultCryptoProvider(){return this.createNodeCryptoProvider()}}function rG(e,t){for(let r in t){let s=r[0].toLowerCase()+r.substring(1),a=new t[r](e);this[s]=a}}function rD(e,t){return function(e){return new rG(e,t)}}class rj{constructor(e,t,r,s){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=t,this.spec=r,this.stripeResource=s}async iterate(e){if(!(e&&e.data&&"number"==typeof e.data.length))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let t=rL(this.requestArgs);if(this.index<e.data.length){let r=t?e.data.length-1-this.index:this.index,s=e.data[r];return this.index+=1,{value:s,done:!1}}if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);let t=await this.pagePromise;return this.iterate(t)}return{done:!0,value:void 0}}getNextPage(e){throw Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let e=(async()=>{let e=await this._next();return this.promiseCache.currentPromise=null,e})();return this.promiseCache.currentPromise=e,e}}class rq extends rj{getNextPage(e){let t=rL(this.requestArgs),r=function(e,t){let r=t?0:e.data.length-1,s=e.data[r],a=s&&s.id;if(!a)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return a}(e,t);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[t?"ending_before":"starting_after"]:r})}}class rZ extends rj{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}}let rU=(e,t,r,s)=>"search"===r.methodType?rM(new rZ(s,t,r,e)):"list"===r.methodType?rM(new rq(s,t,r,e)):null,rM=e=>{var t;let r=(t=(...t)=>e.next(...t),function(){let e=[].slice.call(arguments),r=function(e){if(0===e.length)return;let t=e[0];if("function"!=typeof t)throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof t}`);if(2===t.length)return t;if(t.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${t}`);return function(e,r){r(t(e))}}(e),s=function(e){if(e.length<2)return null;let t=e[1];if("function"!=typeof t)throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof t}`);return t}(e);if(e.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${e}`);return rk(new Promise((e,s)=>{t().then(function s(a){if(a.done){e();return}let i=a.value;return new Promise(e=>{r(i,e)}).then(e=>!1===e?s({done:!0,value:void 0}):t().then(s))}).catch(s)}),s)}),s={autoPagingEach:r,autoPagingToArray:function(e,t){let s=e&&e.limit;if(!s)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(s>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");return rk(new Promise((e,t)=>{let a=[];r(e=>{if(a.push(e),a.length>=s)return!1}).then(()=>{e(a)}).catch(t)}),t)},next:()=>e.next(),return:()=>({}),["undefined"!=typeof Symbol&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"]:()=>s};return s};function rL(e){return!!rS([].slice.call(e)).ending_before}function rF(e,t){if(this._stripe=e,t)throw Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=rx(this.basePath||e.getApiField("basePath")),this.resourcePath=this.path,this.path=rx(this.path),this.initialize(...arguments)}rF.extend=function(e){let t=this,r=Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(...e){t.apply(this,e)};return Object.assign(r,t),r.prototype=Object.create(t.prototype),Object.assign(r.prototype,e),r},rF.method=function(e){if(void 0!==e.path&&void 0!==e.fullPath)throw Error(`Method spec specified both a 'path' (${e.path}) and a 'fullPath' (${e.fullPath}).`);return function(...t){let r="function"==typeof t[t.length-1]&&t.pop();e.urlParams=function(e){let t=e.match(/\{\w+\}/g);return t?t.map(e=>e.replace(/[{}]/g,"")):[]}(e.fullPath||this.createResourcePathWithSymbols(e.path||""));let s=rk(this._makeRequest(t,e,{}),r);return Object.assign(s,rU(this,t,e,s)),s}},rF.MAX_BUFFERED_REQUEST_METRICS=100,rF.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(e,t){let r=[this.basePath(t),this.path(t)];if("function"==typeof e){let s=e(t);s&&r.push(s)}else r.push(e);return this._joinUrlParts(r)},createResourcePathWithSymbols(e){return e?`/${this._joinUrlParts([this.resourcePath,e])}`:`/${this.resourcePath}`},_joinUrlParts:e=>e.join("/").replace(/\/{2,}/g,"/"),_getRequestOpts(e,t,r){let s=(t.method||"GET").toUpperCase(),a=t.usage||[],i=t.urlParams||[],n=t.encode||(e=>e),o=!!t.fullPath,l=rx(o?t.fullPath:t.path||""),u=o?t.fullPath:this.createResourcePathWithSymbols(t.path),d=[].slice.call(e),c=i.reduce((e,t)=>{let r=d.shift();if("string"!=typeof r)throw Error(`Stripe: Argument "${t}" must be a string, but got: ${r} (on API request to \`${s} ${u}\`)`);return e[t]=r,e},{}),h=n(Object.assign({},rS(d),r)),p=function(e){let t={auth:null,host:null,headers:{},settings:{}};if(e.length>0){let r=e[e.length-1];if("string"==typeof r)t.auth=e.pop();else if(rb(r)){let r=Object.assign({},e.pop()),s=Object.keys(r).filter(e=>!rE.includes(e));s.length&&rR(`Invalid options found (${s.join(", ")}); ignoring.`),r.apiKey&&(t.auth=r.apiKey),r.idempotencyKey&&(t.headers["Idempotency-Key"]=r.idempotencyKey),r.stripeAccount&&(t.headers["Stripe-Account"]=r.stripeAccount),r.apiVersion&&(t.headers["Stripe-Version"]=r.apiVersion),Number.isInteger(r.maxNetworkRetries)&&(t.settings.maxNetworkRetries=r.maxNetworkRetries),Number.isInteger(r.timeout)&&(t.settings.timeout=r.timeout),r.host&&(t.host=r.host)}}return t}(d),m=p.host||t.host,f=!!t.streaming;if(d.filter(e=>null!=e).length)throw Error(`Stripe: Unknown arguments (${d}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${s} \`${u}\`)`);let v=o?l(c):this.createFullPath(l,c),_=Object.assign(p.headers,t.headers);t.validator&&t.validator(h,{headers:_});let y="GET"===t.method||"DELETE"===t.method;return{requestMethod:s,requestPath:v,bodyData:y?{}:h,queryData:y?h:{},auth:p.auth,headers:_,host:null!=m?m:null,streaming:f,settings:p.settings,usage:a}},_makeRequest(e,t,r){return new Promise((s,a)=>{var i;let n;try{n=this._getRequestOpts(e,t,r)}catch(e){a(e);return}let o=0===Object.keys(n.queryData).length,l=[n.requestPath,o?"":"?",rw(n.queryData)].join(""),{headers:u,settings:d}=n;this._stripe._requestSender._request(n.requestMethod,n.host,l,n.bodyData,n.auth,{headers:u,settings:d,streaming:n.streaming},n.usage,function(e,r){e?a(e):s(t.transformResponseData?t.transformResponseData(r):r)},null===(i=this.requestDataProcessor)||void 0===i?void 0:i.bind(this))})}};let r$=rF.method,rH=rF.extend({retrieve:r$({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:r$({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:r$({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:r$({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:r$({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:r$({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:r$({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),rz=rF.method,rV=rF.extend({create:rz({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:rz({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:rz({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),increment:rz({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),reverse:rz({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),rB=rF.method,rK=rF.extend({retrieve:rB({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:rB({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:rB({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:rB({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:rB({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),rW=rF.method,rJ=rF.extend({create:rW({method:"POST",fullPath:"/v1/tax/calculations"}),listLineItems:rW({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),rY=rF.method,rQ=rF.extend({create:rY({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:rY({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:rY({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:rY({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),rX=rF.method,r1=rF.extend({deliverCard:rX({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:rX({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:rX({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:rX({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"})}),r0=rF.method,r2=rF.extend({create:r0({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:r0({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:r0({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:r0({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),r4=rF.method,r9=rF.extend({create:r4({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:r4({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:r4({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:r4({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),r5=rF.method,r8=rF.extend({create:r5({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:r5({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:r5({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:r5({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:r5({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),r3=rF.method,r6=rF.extend({create:r3({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),r7=rF.method,se=rF.extend({create:r7({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:r7({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:r7({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),st=rF.method,sr=rF.extend({fundCashBalance:st({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),ss=rF.method,sa=rF.extend({create:ss({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:ss({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:ss({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),si=rF.method,sn=rF.extend({create:si({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:si({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:si({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:si({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:si({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),so=rF.method,sl=rF.extend({retrieve:so({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:so({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),su=rF.method,sd=rF.extend({create:su({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:su({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:su({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:su({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),retrieveFeatures:su({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:su({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),sc=rF.method,sh=rF.extend({fail:sc({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:sc({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:sc({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),sp=rF.method,sm=rF.extend({create:sp({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:sp({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:sp({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:sp({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),sf=rF.method,sv=rF.extend({create:sf({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:sf({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:sf({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:sf({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:sf({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),s_=rF.method,sy=rF.extend({create:s_({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:s_({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:s_({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:s_({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:s_({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),sg=rF.method,sT=rF.extend({fail:sg({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:sg({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:sg({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),sP=rF.method,sE=rF.extend({create:sP({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:sP({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:sP({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:sP({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),sb=rF.method,sw=rF.extend({fail:sb({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:sb({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:sb({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),sx=rF.method,sS=rF.extend({create:sx({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:sx({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:sx({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:sx({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),sO=rF.method,sk=rF.extend({retrieve:sO({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:sO({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),sR=rF.method,sC=rF.extend({presentPaymentMethod:sR({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"})}),sA=rF.method,sN=rF.extend({create:sA({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:sA({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:sA({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:sA({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:sA({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:sA({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),processPaymentIntent:sA({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:sA({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:sA({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:sA({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),sI=rF.method,sG=rF.extend({create:sI({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),sD=rF.method,sj=rF.extend({retrieve:sD({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:sD({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),sq=rF.method,sZ=rF.extend({create:sq({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),sU=rF.method,sM=rF.extend({retrieve:sU({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:sU({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),sL=rF.method,sF=rF.extend({expire:sL({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),s$=rF.method,sH=rF.extend({create:s$({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:s$({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:s$({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:s$({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),sz=rF.method,sV=rF.extend({create:sz({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:sz({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:sz({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),sB=rF.method,sK=rF.extend({retrieve:sB({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:sB({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),sW=rF.method,sJ=rF.extend({retrieve:sW({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:sW({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),sY=rF.method,sQ=rF.extend({create:sY({method:"POST",fullPath:"/v1/apps/secrets"}),list:sY({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:sY({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:sY({method:"GET",fullPath:"/v1/apps/secrets/find"})}),sX=rF.method,s1=rF.extend({create:sX({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),s0=rF.method,s2=rF.extend({create:s0({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:s0({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),list:s0({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:s0({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:s0({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),s4=rF.method,s9=rF.extend({create:s4({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:s4({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),s5=rF.method,s8=rF.extend({retrieve:s5({method:"GET",fullPath:"/v1/tax/settings"}),update:s5({method:"POST",fullPath:"/v1/tax/settings"})}),s3=rF.method,s6=rF.extend({retrieve:s3({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:s3({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),s7=rF.method,ae=rF.extend({create:s7({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:s7({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:s7({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:s7({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:s7({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),at=rF.method,ar=rF.extend({retrieve:at({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:at({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:at({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),as=rF.method,aa=rF.extend({retrieve:as({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:as({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),ai=rF.method,an=rF.extend({createForceCapture:ai({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:ai({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:ai({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),ao=rF.method,al=rF.extend({retrieve:ao({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:ao({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),au=rF.method,ad=rF.extend({retrieve:au({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:au({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:au({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),ac=rF.method,ah=rF.extend({retrieve:ac({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:ac({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:ac({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:ac({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),ap=rF.method,am=rF.extend({retrieve:ap({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:ap({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),af=rF.method,av=rF.extend({create:af({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:af({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:af({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:af({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),a_=rF.method,ay=rF.extend({create:a_({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:a_({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:a_({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:a_({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:a_({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),ag=rF.method,aT=rF.extend({retrieve:ag({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:ag({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),aP=rF.method,aE=rF.extend({create:aP({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:aP({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:aP({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:aP({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:aP({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:aP({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),ab=rF.method,aw=rF.extend({create:ab({method:"POST",fullPath:"/v1/accounts"}),retrieve(e,...t){return"string"==typeof e?ab({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[e,...t]):(null==e&&[].shift.apply([e,...t]),ab({method:"GET",fullPath:"/v1/account"}).apply(this,[e,...t]))},update:ab({method:"POST",fullPath:"/v1/accounts/{account}"}),list:ab({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:ab({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:ab({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:ab({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:ab({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:ab({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:ab({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:ab({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:ab({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:ab({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:ab({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCapability:ab({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:ab({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:ab({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:ab({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:ab({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:ab({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),ax=rF.method,aS=rF.extend({create:ax({method:"POST",fullPath:"/v1/account_links"})}),aO=rF.method,ak=rF.extend({create:aO({method:"POST",fullPath:"/v1/account_sessions"})}),aR=rF.method,aC=rF.extend({create:aR({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:aR({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:aR({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:aR({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),aA=rF.method,aN=rF.extend({retrieve:aA({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:aA({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:aA({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:aA({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:aA({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:aA({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),aI=rF.method,aG=rF.extend({retrieve:aI({method:"GET",fullPath:"/v1/balance"})}),aD=rF.method,aj=rF.extend({retrieve:aD({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:aD({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),aq=rF.method,aZ=rF.extend({create:aq({method:"POST",fullPath:"/v1/charges"}),retrieve:aq({method:"GET",fullPath:"/v1/charges/{charge}"}),update:aq({method:"POST",fullPath:"/v1/charges/{charge}"}),list:aq({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:aq({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:aq({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),aU=rF.method,aM=rF.extend({retrieve:aU({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:aU({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),aL=rF.method,aF=rF.extend({create:aL({method:"POST",fullPath:"/v1/coupons"}),retrieve:aL({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:aL({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:aL({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:aL({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),a$=rF.method,aH=rF.extend({create:a$({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:a$({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:a$({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:a$({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:a$({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:a$({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:a$({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:a$({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),az=rF.method,aV=rF.extend({create:az({method:"POST",fullPath:"/v1/customer_sessions"})}),aB=rF.method,aK=rF.extend({create:aB({method:"POST",fullPath:"/v1/customers"}),retrieve:aB({method:"GET",fullPath:"/v1/customers/{customer}"}),update:aB({method:"POST",fullPath:"/v1/customers/{customer}"}),list:aB({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:aB({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createFundingInstructions:aB({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createBalanceTransaction:aB({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createSource:aB({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:aB({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:aB({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:aB({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:aB({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listPaymentMethods:aB({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listBalanceTransactions:aB({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:aB({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listSources:aB({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:aB({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrievePaymentMethod:aB({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveBalanceTransaction:aB({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:aB({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:aB({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrieveSource:aB({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:aB({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:aB({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:aB({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:aB({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:aB({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:aB({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),aW=rF.method,aJ=rF.extend({retrieve:aW({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:aW({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:aW({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:aW({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),aY=rF.method,aQ=rF.extend({create:aY({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(e,t)=>{if(!t.headers||!t.headers["Stripe-Version"])throw Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:aY({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),aX=rF.method,a1=rF.extend({retrieve:aX({method:"GET",fullPath:"/v1/events/{id}"}),list:aX({method:"GET",fullPath:"/v1/events",methodType:"list"})}),a0=rF.method,a2=rF.extend({retrieve:a0({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:a0({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),a4=rF.method,a9=rF.extend({create:a4({method:"POST",fullPath:"/v1/file_links"}),retrieve:a4({method:"GET",fullPath:"/v1/file_links/{link}"}),update:a4({method:"POST",fullPath:"/v1/file_links/{link}"}),list:a4({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),a5=(e,t,r)=>{let s=(Math.round(1e16*Math.random())+Math.round(1e16*Math.random())).toString();r["Content-Type"]=`multipart/form-data; boundary=${s}`;let a=new TextEncoder,i=new Uint8Array(0),n=a.encode("\r\n");function o(e){let t=i,r=e instanceof Uint8Array?e:new Uint8Array(a.encode(e));(i=new Uint8Array(t.length+r.length+2)).set(t),i.set(r,t.length),i.set(n,i.length-2)}function l(e){return`"${e.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}let u=function(e){let t={},r=(e,s)=>{Object.keys(e).forEach(a=>{let i=e[a],n=s?`${s}[${a}]`:a;if(function(e){let t=typeof e;return("function"===t||"object"===t)&&!!e}(i)){if(!(i instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(i,"data"))return r(i,n);t[n]=i}else t[n]=String(i)})};return r(e,null),t}(t);for(let e in u){let t=u[e];o(`--${s}`),Object.prototype.hasOwnProperty.call(t,"data")?(o(`Content-Disposition: form-data; name=${l(e)}; filename=${l(t.name||"blob")}`),o(`Content-Type: ${t.type||"application/octet-stream"}`),o(""),o(t.data)):(o(`Content-Disposition: form-data; name=${l(e)}`),o(""),o(t))}return o(`--${s}--`),i},a8=rF.method,a3=rF.extend({create:a8({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:a8({method:"GET",fullPath:"/v1/files/{file}"}),list:a8({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:function(e,t,r,s){if(t=t||{},"POST"!==e)return s(null,rw(t));this._stripe._platformFunctions.tryBufferData(t).then(t=>s(null,a5(e,t,r))).catch(e=>s(e,null))}}),a6=rF.method,a7=rF.extend({create:a6({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:a6({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:a6({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:a6({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:a6({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),ie=rF.method,it=rF.extend({create:ie({method:"POST",fullPath:"/v1/invoices"}),retrieve:ie({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:ie({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:ie({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:ie({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),finalizeInvoice:ie({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:ie({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),listUpcomingLines:ie({method:"GET",fullPath:"/v1/invoices/upcoming/lines",methodType:"list"}),markUncollectible:ie({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:ie({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),retrieveUpcoming:ie({method:"GET",fullPath:"/v1/invoices/upcoming"}),search:ie({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:ie({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),voidInvoice:ie({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),ir=rF.method,is=rF.extend({retrieve:ir({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),ia=rF.method,ii="connect.stripe.com",io=rF.extend({basePath:"/",authorizeUrl(e,t){e=e||{};let r="oauth/authorize";return(t=t||{}).express&&(r=`express/${r}`),e.response_type||(e.response_type="code"),e.client_id||(e.client_id=this._stripe.getClientId()),e.scope||(e.scope="read_write"),`https://${ii}/${r}?${rw(e)}`},token:ia({method:"POST",path:"oauth/token",host:ii}),deauthorize(e,...t){return e.client_id||(e.client_id=this._stripe.getClientId()),ia({method:"POST",path:"oauth/deauthorize",host:ii}).apply(this,[e,...t])}}),il=rF.method,iu=rF.extend({create:il({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:il({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:il({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:il({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:il({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:il({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:il({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:il({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:il({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:il({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:il({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),id=rF.method,ic=rF.extend({create:id({method:"POST",fullPath:"/v1/payment_links"}),retrieve:id({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:id({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:id({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:id({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),ih=rF.method,ip=rF.extend({create:ih({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:ih({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:ih({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:ih({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),im=rF.method,iv=rF.extend({create:im({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:im({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:im({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:im({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:im({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),i_=rF.method,iy=rF.extend({create:i_({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:i_({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:i_({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:i_({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:i_({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:i_({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),ig=rF.method,iT=rF.extend({create:ig({method:"POST",fullPath:"/v1/payouts"}),retrieve:ig({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:ig({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:ig({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:ig({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:ig({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),iP=rF.method,iE=rF.extend({create:iP({method:"POST",fullPath:"/v1/plans"}),retrieve:iP({method:"GET",fullPath:"/v1/plans/{plan}"}),update:iP({method:"POST",fullPath:"/v1/plans/{plan}"}),list:iP({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:iP({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),ib=rF.method,iw=rF.extend({create:ib({method:"POST",fullPath:"/v1/prices"}),retrieve:ib({method:"GET",fullPath:"/v1/prices/{price}"}),update:ib({method:"POST",fullPath:"/v1/prices/{price}"}),list:ib({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:ib({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),ix=rF.method,iS=rF.extend({create:ix({method:"POST",fullPath:"/v1/products"}),retrieve:ix({method:"GET",fullPath:"/v1/products/{id}"}),update:ix({method:"POST",fullPath:"/v1/products/{id}"}),list:ix({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:ix({method:"DELETE",fullPath:"/v1/products/{id}"}),search:ix({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),iO=rF.method,ik=rF.extend({create:iO({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:iO({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:iO({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:iO({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),iR=rF.method,iC=rF.extend({create:iR({method:"POST",fullPath:"/v1/quotes"}),retrieve:iR({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:iR({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:iR({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:iR({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:iR({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:iR({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:iR({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:iR({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:iR({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),iA=rF.method,iN=rF.extend({create:iA({method:"POST",fullPath:"/v1/refunds"}),retrieve:iA({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:iA({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:iA({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:iA({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),iI=rF.method,iG=rF.extend({retrieve:iI({method:"GET",fullPath:"/v1/reviews/{review}"}),list:iI({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:iI({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),iD=rF.method,ij=rF.extend({list:iD({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),iq=rF.method,iZ=rF.extend({create:iq({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:iq({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:iq({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:iq({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:iq({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:iq({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:iq({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),iU=rF.method,iM=rF.extend({create:iU({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:iU({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:iU({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:iU({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),iL=rF.method,iF=rF.extend({create:iL({method:"POST",fullPath:"/v1/sources"}),retrieve:iL({method:"GET",fullPath:"/v1/sources/{source}"}),update:iL({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:iL({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:iL({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),i$=rF.method,iH=rF.extend({create:i$({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:i$({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:i$({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:i$({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:i$({method:"DELETE",fullPath:"/v1/subscription_items/{item}"}),createUsageRecord:i$({method:"POST",fullPath:"/v1/subscription_items/{subscription_item}/usage_records"}),listUsageRecordSummaries:i$({method:"GET",fullPath:"/v1/subscription_items/{subscription_item}/usage_record_summaries",methodType:"list"})}),iz=rF.method,iV=rF.extend({create:iz({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:iz({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:iz({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:iz({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:iz({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:iz({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),iB=rF.method,iK=rF.extend({create:iB({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:iB({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:iB({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:iB({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:iB({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:iB({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),resume:iB({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:iB({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),iW=rF.method,iJ=rF.extend({retrieve:iW({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:iW({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),iY=rF.method,iQ=rF.extend({create:iY({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:iY({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:iY({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:iY({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),iX=rF.method,i1=rF.extend({create:iX({method:"POST",fullPath:"/v1/tokens"}),retrieve:iX({method:"GET",fullPath:"/v1/tokens/{token}"})}),i0=rF.method,i2=rF.extend({create:i0({method:"POST",fullPath:"/v1/topups"}),retrieve:i0({method:"GET",fullPath:"/v1/topups/{topup}"}),update:i0({method:"POST",fullPath:"/v1/topups/{topup}"}),list:i0({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:i0({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),i4=rF.method,i9=rF.extend({create:i4({method:"POST",fullPath:"/v1/transfers"}),retrieve:i4({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:i4({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:i4({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:i4({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:i4({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:i4({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:i4({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),i5=rF.method,i8=rF.extend({create:i5({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:i5({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:i5({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:i5({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:i5({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),i3=rD("apps",{Secrets:sQ}),i6=rD("billingPortal",{Configurations:r9,Sessions:s1}),i7=rD("checkout",{Sessions:s2}),ne=rD("climate",{Orders:sy,Products:sk,Suppliers:s6}),nt=rD("financialConnections",{Accounts:rH,Sessions:s9,Transactions:al}),nr=rD("identity",{VerificationReports:aT,VerificationSessions:aE}),ns=rD("issuing",{Authorizations:rK,Cardholders:rQ,Cards:r2,Disputes:sn,Tokens:ar,Transactions:ad}),na=rD("radar",{EarlyFraudWarnings:sl,ValueListItems:av,ValueLists:ay}),ni=rD("reporting",{ReportRuns:sV,ReportTypes:sK}),nn=rD("sigma",{ScheduledQueryRuns:sJ}),no=rD("tax",{Calculations:rJ,Registrations:sH,Settings:s8,Transactions:ah}),nl=rD("terminal",{Configurations:r8,ConnectionTokens:r6,Locations:sv,Readers:sN}),nu=rD("testHelpers",{Customers:sr,Refunds:sF,TestClocks:ae,Issuing:rD("issuing",{Authorizations:rV,Cards:r1,Transactions:an}),Terminal:rD("terminal",{Readers:sC}),Treasury:rD("treasury",{InboundTransfers:sh,OutboundPayments:sT,OutboundTransfers:sw,ReceivedCredits:sG,ReceivedDebits:sZ})}),nd=rD("treasury",{CreditReversals:se,DebitReversals:sa,FinancialAccounts:sd,InboundTransfers:sm,OutboundPayments:sE,OutboundTransfers:sS,ReceivedCredits:sj,ReceivedDebits:sM,TransactionEntries:aa,Transactions:am});class nc{constructor(e,t){this._stripe=e,this._maxBufferedRequestMetric=t}_addHeadersDirectlyToObject(e,t){e.requestId=t["request-id"],e.stripeAccount=e.stripeAccount||t["stripe-account"],e.apiVersion=e.apiVersion||t["stripe-version"],e.idempotencyKey=e.idempotencyKey||t["idempotency-key"]}_makeResponseEvent(e,t,r){let s=Date.now(),a=s-e.request_start_time;return rO({api_version:r["stripe-version"],account:r["stripe-account"],idempotency_key:r["idempotency-key"],method:e.method,path:e.path,status:t,request_id:this._getRequestId(r),elapsed:a,request_start_time:e.request_start_time,request_end_time:s})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,t,r){return s=>{let a=s.getHeaders(),i=s.toStream(()=>{let r=this._makeResponseEvent(e,s.getStatusCode(),a);this._stripe._emitter.emit("response",r),this._recordRequestMetrics(this._getRequestId(a),r.elapsed,t)});return this._addHeadersDirectlyToObject(i,a),r(null,i)}}_jsonResponseHandler(e,t,r){return s=>{let a=s.getHeaders(),i=this._getRequestId(a),n=s.getStatusCode(),o=this._makeResponseEvent(e,n,a);this._stripe._emitter.emit("response",o),s.toJSON().then(e=>{if(e.error)throw"string"==typeof e.error&&(e.error={type:e.error,message:e.error_description}),e.error.headers=a,e.error.statusCode=n,e.error.requestId=i,401===n?new rp(e.error):403===n?new rm(e.error):429===n?new rf(e.error):ru.generate(e.error);return e},e=>{throw new rh({message:"Invalid JSON received from the Stripe API",exception:e,requestId:a["request-id"]})}).then(e=>{this._recordRequestMetrics(i,o.elapsed,t);let n=s.getRawResponse();this._addHeadersDirectlyToObject(n,a),Object.defineProperty(e,"lastResponse",{enumerable:!1,writable:!1,value:n}),r(null,e)},e=>r(e,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,t,r,s){return!!(s&&0===t&&t5.CONNECTION_CLOSED_ERROR_CODES.includes(s.code))||!(t>=r)&&(!e||"false"!==e.getHeaders()["stripe-should-retry"]&&!!("true"===e.getHeaders()["stripe-should-retry"]||409===e.getStatusCode()||e.getStatusCode()>=500))}_getSleepTimeInMS(e,t=null){let r=this._stripe.getInitialNetworkRetryDelay(),s=Math.min(r*Math.pow(e-1,2),this._stripe.getMaxNetworkRetryDelay());return s*=.5*(1+Math.random()),s=Math.max(r,s),Number.isInteger(t)&&t<=60&&(s=Math.max(s,t)),1e3*s}_getMaxNetworkRetries(e={}){return void 0!==e.maxNetworkRetries&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,t){let r=this._getMaxNetworkRetries(t);return"POST"===e&&r>0?`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`:null}_makeHeaders(e,t,r,s,a,i,n){let o={Authorization:e?`Bearer ${e}`:this._stripe.getApiField("auth"),Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","User-Agent":this._getUserAgentString(),"X-Stripe-Client-User-Agent":s,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":r,"Stripe-Account":this._stripe.getApiField("stripeAccount"),"Idempotency-Key":this._defaultIdempotencyKey(a,n)},l="POST"==a||"PUT"==a||"PATCH"==a;return(l||t)&&(l||rR(`${a} method had non-zero contentLength but no payload is expected for this verb`),o["Content-Length"]=t),Object.assign(rO(o),i&&"object"==typeof i?Object.keys(i).reduce((e,t)=>(e[t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")]=i[t],e),{}):i)}_getUserAgentString(){let e=this._stripe.getConstant("PACKAGE_VERSION"),t=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/v1 NodeBindings/${e} ${t}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0)return JSON.stringify({last_request_metrics:this._stripe._prevRequestMetrics.shift()})}_recordRequestMetrics(e,t,r){if(this._stripe.getTelemetryEnabled()&&e){if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)rR("Request metrics buffer is full, dropping telemetry message.");else{let s={request_id:e,request_duration_ms:t};r&&r.length>0&&(s.usage=r),this._stripe._prevRequestMetrics.push(s)}}}_request(e,t,r,s,a,i={},n=[],o,l=null){let u;let d=(e,t,r,s,a)=>setTimeout(e,this._getSleepTimeInMS(s,a),t,r,s+1),c=(s,a,l)=>{let h=i.settings&&i.settings.timeout&&Number.isInteger(i.settings.timeout)&&i.settings.timeout>=0?i.settings.timeout:this._stripe.getApiField("timeout"),p=this._stripe.getApiField("httpClient").makeRequest(t||this._stripe.getApiField("host"),this._stripe.getApiField("port"),r,e,a,u,this._stripe.getApiField("protocol"),h),m=Date.now(),f=rO({api_version:s,account:a["Stripe-Account"],idempotency_key:a["Idempotency-Key"],method:e,path:r,request_start_time:m}),v=l||0,_=this._getMaxNetworkRetries(i.settings||{});this._stripe._emitter.emit("request",f),p.then(e=>nc._shouldRetry(e,v,_)?d(c,s,a,v,e.getHeaders()["retry-after"]):i.streaming&&400>e.getStatusCode()?this._streamingResponseHandler(f,n,o)(e):this._jsonResponseHandler(f,n,o)(e)).catch(e=>nc._shouldRetry(null,v,_,e)?d(c,s,a,v,null):o(new rv({message:e.code&&e.code===t5.TIMEOUT_ERROR_CODE?`Request aborted due to timeout being reached (${h}ms)`:nc._generateConnectionErrorMessage(v),detail:e})))},h=(t,r)=>{if(t)return o(t);u=r,this._stripe.getClientUserAgent(t=>{var r,s;let n=this._stripe.getApiField("version"),o=this._makeHeaders(a,u.length,n,t,e,null!==(r=i.headers)&&void 0!==r?r:null,null!==(s=i.settings)&&void 0!==s?s:{});c(n,o,0)})};l?l(e,s,i.headers,h):h(null,rw(s||{}))}}function nh(e){let t={DEFAULT_TOLERANCE:300,signature:null,constructEvent(e,r,s,a,i,n){try{this.signature.verifyHeader(e,r,s,a||t.DEFAULT_TOLERANCE,i,n)}catch(e){throw e instanceof tX&&(e.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),e}return e instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(e)):JSON.parse(e)},async constructEventAsync(e,r,s,a,i,n){return await this.signature.verifyHeaderAsync(e,r,s,a||t.DEFAULT_TOLERANCE,i,n),e instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(e)):JSON.parse(e)},generateTestHeaderString:function(e){if(!e)throw new ru({message:"Options are required"});return e.timestamp=Math.floor(e.timestamp)||Math.floor(Date.now()/1e3),e.scheme=e.scheme||r.EXPECTED_SCHEME,e.cryptoProvider=e.cryptoProvider||o(),e.signature=e.signature||e.cryptoProvider.computeHMACSignature(e.timestamp+"."+e.payload,e.secret),["t="+e.timestamp,e.scheme+"="+e.signature].join(",")}},r={EXPECTED_SCHEME:"v1",verifyHeader(e,t,r,n,l,u){let{decodedHeader:d,decodedPayload:c,details:h,suspectPayloadType:p}=a(e,t,this.EXPECTED_SCHEME),m=/\s/.test(r),f=(l=l||o()).computeHMACSignature(s(c,h),r);return i(c,d,h,f,n,p,m,u),!0},async verifyHeaderAsync(e,t,r,n,l,u){let{decodedHeader:d,decodedPayload:c,details:h,suspectPayloadType:p}=a(e,t,this.EXPECTED_SCHEME),m=/\s/.test(r);l=l||o();let f=await l.computeHMACSignatureAsync(s(c,h),r);return i(c,d,h,f,n,p,m,u)}};function s(e,t){return`${t.timestamp}.${e}`}function a(e,t,r){if(!e)throw new r_(t,e,{message:"No webhook payload was provided."});let s="string"!=typeof e&&!(e instanceof Uint8Array),a=new TextDecoder("utf8"),i=e instanceof Uint8Array?a.decode(e):e;if(Array.isArray(t))throw Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(null==t||""==t)throw new r_(t,e,{message:"No stripe-signature header value was provided."});let n=t instanceof Uint8Array?a.decode(t):t,o="string"!=typeof n?null:n.split(",").reduce((e,t)=>{let s=t.split("=");return"t"===s[0]&&(e.timestamp=parseInt(s[1],10)),s[0]===r&&e.signatures.push(s[1]),e},{timestamp:-1,signatures:[]});if(!o||-1===o.timestamp)throw new r_(n,i,{message:"Unable to extract timestamp and signatures from header"});if(!o.signatures.length)throw new r_(n,i,{message:"No signatures found with expected scheme"});return{decodedPayload:i,decodedHeader:n,details:o,suspectPayloadType:s}}function i(t,r,s,a,i,n,o,l){let u=!!s.signatures.filter(e.secureCompare.bind(e,a)).length,d="\nLearn more about webhook signing and explore webhook integration examples for various frameworks at https://github.com/stripe/stripe-node#webhook-signing",c=o?"\n\nNote: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value":"";if(!u){if(n)throw new r_(r,t,{message:"Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. \nSignature verification is impossible without access to the original signed material. \n"+d+"\n"+c});throw new r_(r,t,{message:"No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? \n If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.\n"+d+"\n"+c})}let h=Math.floor(("number"==typeof l?l:Date.now())/1e3)-s.timestamp;if(i>0&&h>i)throw new r_(r,t,{message:"Timestamp outside the tolerance zone"});return!0}let n=null;function o(){return n||(n=e.createDefaultCryptoProvider()),n}return t.signature=r,t}let np="api.stripe.com",nm="/v1/",nf="2023-10-16",nv=["name","version","url","partner_id"],n_=["apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount"],ny=e=>new nc(e,rF.MAX_BUFFERED_REQUEST_METRICS),ng=new(function(e,t=ny){function r(t=e){return nh(t)}function s(a,i={}){if(!(this instanceof s))return new s(a,i);let n=this._getPropsFromConfig(i);if(this._platformFunctions=e,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=s.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter),n.protocol&&"https"!==n.protocol&&(!n.host||/\.stripe\.com$/.test(n.host)))throw Error("The `https` protocol must be used when sending requests to `*.stripe.com`");let o=n.httpAgent||null;this._api={auth:null,host:n.host||np,port:n.port||"443",protocol:n.protocol||"https",basePath:nm,version:n.apiVersion||nf,timeout:rC("timeout",n.timeout,8e4),maxNetworkRetries:rC("maxNetworkRetries",n.maxNetworkRetries,1),agent:o,httpClient:n.httpClient||(o?this._platformFunctions.createNodeHttpClient(o):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:n.stripeAccount||null};let u=n.typescript||!1;u!==s.USER_AGENT.typescript&&(s.USER_AGENT.typescript=u),n.appInfo&&this._setAppInfo(n.appInfo),this._prepResources(),this._setApiKey(a),this.errors=l,this.webhooks=r(),this._prevRequestMetrics=[],this._enableTelemetry=!1!==n.telemetry,this._requestSender=t(this),this.StripeResource=s.StripeResource}return s.PACKAGE_VERSION="14.13.0",s.USER_AGENT=Object.assign({bindings_version:s.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},"undefined"==typeof process?{}:{lang_version:process.version,platform:process.platform}),s.StripeResource=rF,s.resources=u,s.HttpClient=t5,s.HttpClientResponse=t8,s.CryptoProvider=tQ,s.webhooks=Object.assign(r,nh(e)),s.errors=l,s.createNodeHttpClient=e.createNodeHttpClient,s.createFetchHttpClient=e.createFetchHttpClient,s.createNodeCryptoProvider=e.createNodeCryptoProvider,s.createSubtleCryptoProvider=e.createSubtleCryptoProvider,s.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,_setApiKey(e){e&&this._setApiField("auth",`Bearer ${e}`)},_setAppInfo(e){if(e&&"object"!=typeof e)throw Error("AppInfo must be an object.");if(e&&!e.name)throw Error("AppInfo.name is required");e=e||{},this._appInfo=nv.reduce((t,r)=>("string"==typeof e[r]&&((t=t||{})[r]=e[r]),t),void 0)},_setApiField(e,t){this._api[e]=t},getApiField(e){return this._api[e]},setClientId(e){this._clientId=e},getClientId(){return this._clientId},getConstant:e=>{switch(e){case"DEFAULT_HOST":return np;case"DEFAULT_PORT":return"443";case"DEFAULT_BASE_PATH":return nm;case"DEFAULT_API_VERSION":return nf;case"DEFAULT_TIMEOUT":return 8e4;case"MAX_NETWORK_RETRY_DELAY_SEC":return 2;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return .5}return s[e]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(e,t,r){let s=rC(e,t,r);this._setApiField(e,s)},getMaxNetworkRetryDelay:()=>2,getInitialNetworkRetryDelay:()=>.5,getClientUserAgent(e){return this.getClientUserAgentSeeded(s.USER_AGENT,e)},getClientUserAgentSeeded(e,t){this._platformFunctions.getUname().then(r=>{var s;let a={};for(let t in e)a[t]=encodeURIComponent(null!==(s=e[t])&&void 0!==s?s:"null");a.uname=encodeURIComponent(r||"UNKNOWN");let i=this.getApiField("httpClient");i&&(a.httplib=encodeURIComponent(i.getClientName())),this._appInfo&&(a.application=this._appInfo),t(JSON.stringify(a))})},getAppInfoAsString(){if(!this._appInfo)return"";let e=this._appInfo.name;return this._appInfo.version&&(e+=`/${this._appInfo.version}`),this._appInfo.url&&(e+=` (${this._appInfo.url})`),e},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let e in u)this["OAuth"===e?"oauth":e[0].toLowerCase()+e.substring(1)]=new u[e](this)},_getPropsFromConfig(e){if(!e)return{};let t="string"==typeof e;if(!(e===Object(e)&&!Array.isArray(e))&&!t)throw Error("Config must either be an object or a string");if(t)return{apiVersion:e};if(Object.keys(e).filter(e=>!n_.includes(e)).length>0)throw Error(`Config object may only contain the following: ${n_.join(", ")}`);return e}},s}(new rI))(process.env.STRIPE_SECRET_KEY??"",{apiVersion:"2023-10-16",typescript:!0}),nT=tV({createSession:tK.input(tt.object({productIds:tt.array(tt.string())})).mutation(async({ctx:e,input:t})=>{let{user:r}=e,{productIds:s}=t;if(0===s.length)throw new tn({code:"BAD_REQUEST"});let a=await (0,m.T)(),{docs:i}=await a.find({collection:"products",where:{id:{in:s}}}),n=i.filter(e=>!!e.priceId),o=await a.create({collection:"orders",data:{_isPaid:!1,products:n.map(e=>e.id),user:r.id}}),l=[];n.forEach(e=>{l.push({price:e.priceId,quantity:1})}),l.push({price:"price_1OciyyEWTkHDHHpZa7rf9mFU",quantity:1,adjustable_quantity:{enabled:!1}});try{return{url:(await ng.checkout.sessions.create({success_url:`http://localhost:3000/thank-you?orderId=${o.id}`,cancel_url:"http://localhost:3000/cart",payment_method_types:["card"],mode:"payment",metadata:{userId:r.id,orderId:o.id},line_items:l})).url}}catch(e){return console.log(e),{url:null}}}),pullOrderStatus:tB.input(tt.object({orderId:tt.string()})).query(async({input:e})=>{let{orderId:t}=e,r=await (0,m.T)(),{docs:s}=await r.find({collection:"orders",where:{id:{equals:t}}});if(!s.length)throw new tn({code:"NOT_FOUND"});let[a]=s;return{isPaid:a._isPaid}})}),nP=tV({test:tB.input(tt.object({cursor:tt.string().nullish(),limit:tt.number().min(1).max(100).default(10)})).query(async({input:e})=>{let{cursor:t,limit:r}=e,s=await (0,m.T)();return console.log(await s.db),{items:s.find({collection:"vehicles"}),nextCursor:null}})}),nE=tV({getTodos:tB.query(async()=>"test"),addTodo:tB.input(tt.string()).mutation(async e=>e+"is added"),setDone:tB.input(tt.object({id:tt.number(),done:tt.number()})).mutation(async e=>!0),auth:tW,payment:nT,example:nP,getInfiniteProducts:tB.input(tt.object({limit:tt.number().min(1).max(100),cursor:tt.number().nullish(),query:tr})).query(async({input:e})=>{let{query:t,cursor:r}=e,{sort:s,limit:a,...i}=t,n=await (0,m.T)(),o={};Object.entries(i).forEach(([e,t])=>{o[e]={equals:t}});let{docs:l,hasNextPage:u,nextPage:d}=await n.find({collection:"products",where:{approvedForSale:{equals:"approved"},...o},sort:s,depth:1,limit:a,page:r||1});return{items:l,nextPage:u?d:null}}),getInfiniteVehicles:tB.input(tt.object({limit:tt.number().min(1).max(100),cursor:tt.number().nullish(),query:tr})).query(async({input:e})=>{let{query:t,cursor:r}=e,{sort:s,limit:a,search:i,...n}=t,o=await (0,m.T)(),l={};Object.entries(n).forEach(([e,t])=>{l[e]={equals:t}});let{docs:u,hasNextPage:d,nextPage:c}=await o.find({collection:"vehicles",where:{approvedForSale:{equals:"approved"},or:[{name:{contains:i}},{maker:{contains:i}}],...l},sort:s,depth:1,limit:a,page:r||1});return{items:u,nextPage:d?c:null}})});function nb(e){let{path:t,error:r,config:s}=e,{code:a}=e.error,i={message:r.message,code:tl[a],data:{code:a,httpStatus:tc(r)}};return s.isDev&&"string"==typeof e.error.stack&&(i.data.stack=e.error.stack),"string"==typeof t&&(i.data.path=t),s.errorFormatter({...e,shape:i})}function nw(e,t){return"error"in t?{...t,error:e.transformer.output.serialize(t.error)}:"data"in t.result?{...t,result:{...t.result,data:e.transformer.output.serialize(t.result.data)}}:t}function nx(e,t){return Array.isArray(t)?t.map(t=>nw(e,t)):nw(e,t)}let nS=(e,t)=>void 0!==e?t.input.deserialize(e):e,nO={GET:"query",POST:"mutation"},nk={getInputs:e=>{let t=function(e){let{req:t}=e;try{if("GET"===t.method){if(!t.query.has("input"))return;let e=t.query.get("input");return JSON.parse(e)}if(!e.preprocessedBody&&"string"==typeof t.body)return 0===t.body.length?void 0:JSON.parse(t.body);return t.body}catch(e){throw new tn({code:"PARSE_ERROR",cause:e})}}(e),r=e.router._def._config.transformer;if(!e.isBatchCall)return{0:nS(t,r)};if(null==t||"object"!=typeof t||Array.isArray(t))throw new tn({code:"BAD_REQUEST",message:'"input" needs to be an object when doing a batch call'});let s={};for(let e in t){let a=nS(t[e],r);s[e]=a}return s}};function nR(e){let{ctx:t,paths:r,type:s,responseMeta:a,untransformedJSON:i,errors:n=[]}=e,o=i?function(e){let t=new Set((Array.isArray(e)?e:[e]).map(e=>{if("error"in e){let t=e.error.data;return"number"==typeof t.httpStatus?t.httpStatus:td[tu[e.error.code]]??500}return 200}));return 1!==t.size?207:t.values().next().value}(i):200,l={"Content-Type":"application/json"},u=!i,d=u?[]:Array.isArray(i)?i:[i],c=a?.({ctx:t,paths:r,type:s,data:d,errors:n,eagerGeneration:u})??{};for(let[e,t]of Object.entries(c.headers??{}))l[e]=t;return c.status&&(o=c.status),{status:o,headers:l}}async function nC(e){let{opts:t,ctx:r,type:s,input:a,path:i}=e;try{return{result:{data:await tP({procedures:t.router._def.procedures,path:i,rawInput:a,ctx:r,type:s})}}}catch(n){let e=ti(n);return t.onError?.({error:e,path:i,input:a,ctx:r,type:s,req:t.req}),{error:nb({config:t.router._def._config,error:e,type:s,path:i,input:a,ctx:r})}}}function nA(e,t){let{router:r,req:s,onError:a}=t.opts,i=ti(e);a?.({error:i,path:t.path,input:t.input,ctx:t.ctx,type:t.type,req:s});let n={error:nb({config:r._def._config,error:i,type:t.type,path:t.path,input:t.input,ctx:t.ctx})},o=JSON.stringify(nx(r._def._config,n));return{error:i,untransformedJSON:n,body:o}}async function nN(e){let t,r;let{router:s,req:a,unstable_onHead:i,unstable_onChunk:n}=e;if("HEAD"===a.method){let e={status:204};return i?.(e,!1),n?.([-1,""]),e}let o=e.contentTypeHandler??nk,l=e.batching?.enabled??!0,u=nO[a.method]??"unknown",d=!!a.query.get("batch"),c=d&&i&&n&&"stream"===a.headers["trpc-batch-mode"];try{if(r=await e.createContext(),e.error)throw e.error;if(d&&!l)throw Error("Batching is not enabled on the server");if("subscription"===u)throw new tn({message:"Subscriptions should use wsLink",code:"METHOD_NOT_SUPPORTED"});if("unknown"===u)throw new tn({message:`Unexpected request method ${a.method}`,code:"METHOD_NOT_SUPPORTED"});let h=await o.getInputs({isBatchCall:d,req:a,router:s,preprocessedBody:e.preprocessedBody??!1}),p=(t=d?decodeURIComponent(e.path).split(","):[e.path]).map((t,s)=>nC({opts:e,ctx:r,type:u,input:h[s],path:t}));if(!c){let a=await Promise.all(p),o=a.flatMap(e=>"error"in e?[e.error]:[]),l=nR({ctx:r,paths:t,type:u,responseMeta:e.responseMeta,untransformedJSON:a,errors:o});i?.(l,!1);let c=d?a:a[0],h=nx(s._def._config,c),m=JSON.stringify(h);return n?.([-1,m]),{status:l.status,headers:l.headers,body:m}}let m=nR({ctx:r,paths:t,type:u,responseMeta:e.responseMeta});i(m,!0);let f=new Map(p.map((e,t)=>[t,e.then(e=>[t,e])]));for(let a of t){let[a,i]=await Promise.race(f.values());f.delete(a);try{let e=nx(s._def._config,i),t=JSON.stringify(e);n([a,t])}catch(l){let s=t[a],i=h[a],{body:o}=nA(l,{opts:e,ctx:r,type:u,path:s,input:i});n([a,o])}}return}catch(d){let{error:s,untransformedJSON:a,body:o}=nA(d,{opts:e,ctx:r,type:u}),l=nR({ctx:r,paths:t,type:u,responseMeta:e.responseMeta,untransformedJSON:a,errors:[s]});return i?.(l,!1),n?.([-1,o]),{status:l.status,headers:l.headers,body:o}}}let nI=e=>e=(e=e.startsWith("/")?e.slice(1):e).endsWith("/")?e.slice(0,-1):e;async function nG(e){let t,r,s,a;let i=new Headers,n=async()=>e.createContext?.({req:e.req,resHeaders:i}),o=new URL(e.req.url),l=nI(o.pathname),u=nI(e.endpoint),d=nI(l.slice(u.length)),c={query:o.searchParams,method:e.req.method,headers:Object.fromEntries(e.req.headers),body:e.req.headers.get("content-type")?.startsWith("application/json")?await e.req.text():""},h=new Promise(e=>t=e),p=200,m=!1;return nN({req:c,createContext:n,path:d,router:e.router,batching:e.batching,responseMeta:e.responseMeta,onError(t){e?.onError?.({...t,req:e.req})},unstable_onHead:(e,n)=>{for(let[t,r]of Object.entries(e.headers??{}))if(void 0!==r){if("string"==typeof r){i.set(t,r);continue}for(let e of r)i.append(t,e)}if(p=e.status,n){i.set("Transfer-Encoding","chunked"),i.append("Vary","trpc-batch-mode");let e=new Response(new ReadableStream({start(e){r=e}}),{status:p,headers:i});t(e),s=new TextEncoder,a=function(){let e=!0;function t(t,r){let s=e?"{":",";return e=!1,`${s}"${t}":${r}
`}return t.end=()=>"}",t}(),m=!0}},unstable_onChunk:([e,n])=>{if(-1===e){let e=new Response(n||null,{status:p,headers:i});t(e)}else r.enqueue(s.encode(a(e,n)))}}).then(()=>{m&&(r.enqueue(s.encode(a.end())),r.close())}).catch(()=>{m&&r.close()}),h}let nD=async e=>{try{return nG({endpoint:"/api/trpc",req:e,router:nE,createContext:()=>({})})}catch(e){return console.error("Error in POST handler:",e),new Response(JSON.stringify({error:"Something went wrong"}),{status:500})}},nj=new c.AppRouteRouteModule({definition:{kind:h.x.APP_ROUTE,page:"/api/trpc/[trpc]/route",pathname:"/api/trpc/[trpc]",filename:"route",bundlePath:"app/api/trpc/[trpc]/route"},resolvedPagePath:"D:\\Amin\\Projects\\VehiclesWeb\\src\\app\\api\\trpc\\[trpc]\\route.ts",nextConfigOutput:"",userland:d}),{requestAsyncStorage:nq,staticGenerationAsyncStorage:nZ,serverHooks:nU}=nj,nM="/api/trpc/[trpc]/route";function nL(){return(0,p.patchFetch)({serverHooks:nU,staticGenerationAsyncStorage:nZ})}},73278:(e,t,r)=>{"use strict";e.exports=r(30517)},55249:(e,t,r)=>{"use strict";r.d(t,{T:()=>h});var s=r(25438),a=r.n(s),i=r(55315),n=r.n(i),o=r(48858),l=r.n(o),u=r(56742);a().config({path:n().resolve(__dirname,"../.env")});let d=u.createTransport({host:"smtp.resend.com",secure:!0,port:465,auth:{user:"resend",pass:process.env.RESEND_API_KEY}}),c=global.payload;c||(c=global.payload={client:null,promise:null});let h=async({initOptions:e}={})=>{if(!process.env.PAYLOAD_SECRET)throw Error("PAYLOAD_SECRET is missing");if(c.client)return c.client;c.promise||(c.promise=l().init({email:{transport:d,fromAddress:"onboarding@resend.dev",fromName:"ShowRoom"},secret:process.env.PAYLOAD_SECRET,local:!e?.express,...e||{}}));try{c.client=await c.promise}catch(e){throw c.promise=null,e}return c.client}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[379,819],()=>r(60054));module.exports=s})();