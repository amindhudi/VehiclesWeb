{"version":3,"file":"static/chunks/root/src/middleware-934500f23c4e61ee.js","mappings":"oFACA,CAAAA,OAAAC,QAAA,CAAAD,OAAAC,QAAA,MAAAC,IAAA,EACA,iBACA,WACA,OAAeC,EAAQ,KACvB,EACA,mGCDO,IAAMC,EAAoB,MAC7BC,QAEUA,EAAd,IAAMC,EAAAA,OAAQD,CAAAA,EAAAA,EAAQE,GAAG,CAAC,mBAAZF,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAA8BG,KAAK,CAC3CC,EAAQ,MAAMC,MAAM,GAAsCC,MAAA,CAAnCC,wBAAmC,iBAAgB,CAC5EC,QAAQ,CACJC,cAAc,OAAaH,MAAA,CAANL,EACzB,CACJ,GACM,CAACS,KAAAA,CAAI,CAAC,CAAG,MAAMN,EAAMO,IAAI,GAG/B,MAAO,CAACD,KAAAA,CAAI,CACZ,ECfO,eAAeE,EAAWC,CAAgB,EAC7C,GAAM,CAACC,QAAAA,CAAO,CAAEd,QAAAA,CAAO,CAAC,CAAGa,EACrB,CAACH,KAAAA,CAAI,CAAC,CAAG,MAAMX,EAAkBC,UAEvC,GAAW,CAAC,WAAY,WAAW,CAACe,QAAQ,CAACD,EAAQE,QAAQ,EAElDC,EAAAA,YAAYA,CAACC,QAAQ,CACxB,GAAsCZ,MAAA,CAAnCC,wBAAmC,MAGvCU,EAAAA,YAAYA,CAACE,IAAI,EAC5B","sources":["webpack://_N_E/?e795","webpack://_N_E/./src/lib/payload-utils.ts","webpack://_N_E/./src/middleware.ts"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"src/middleware\",\n      function () {\n        return require(\"private-next-root-dir/src/middleware.ts\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"src/middleware\"])\n      });\n    }\n  ","import { ReadonlyRequestCookies } from \"next/dist/server/web/spec-extension/adapters/request-cookies\";\r\nimport { NextRequest } from \"next/server\";\r\nimport { User } from \"../payload-types\";\r\n\r\n\r\nexport const getServerSideUser = async (\r\n    cookies: NextRequest['cookies'] | ReadonlyRequestCookies\r\n) =>{\r\nconst token = cookies.get('payload-token')?.value\r\nconst meRes = await fetch(`${process.env.NEXT_PUBLIC_SERVER_URL}/api/users/me`, {\r\n    headers:{\r\n        Authorization:`JWT ${token}`\r\n    }\r\n})\r\nconst {user}= (await meRes.json()) as {\r\n    user:User | null\r\n}\r\nreturn {user}\r\n}","import { NextRequest, NextResponse } from \"next/server\";\r\nimport { getServerSideUser } from \"./lib/payload-utils\";\r\n\r\nexport async function middleware(req: NextRequest) {\r\n    const {nextUrl, cookies} = req\r\n    const {user} = await getServerSideUser(cookies)\r\n    \r\n    if(user && ['/sign-in', '/sign-up'].includes(nextUrl.pathname))\r\n    {\r\n        return NextResponse.redirect(\r\n            `${process.env.NEXT_PUBLIC_SERVER_URL}/`\r\n        )\r\n    }\r\n    return NextResponse.next()\r\n}"],"names":["window","__NEXT_P","push","__webpack_require__","getServerSideUser","cookies","token","get","value","meRes","fetch","concat","process","headers","Authorization","user","json","middleware","req","nextUrl","includes","pathname","NextResponse","redirect","next"],"sourceRoot":""}